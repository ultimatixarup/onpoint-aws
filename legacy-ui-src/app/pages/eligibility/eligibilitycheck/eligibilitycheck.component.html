<ngx-spinner  bdColor="rgba(0,0,0,0.8)" size="large" color="#fff" type="ball-elastic-dots"
    [fullScreen]="true">
    <div class="custom-spinner">
        <img src="../../../../../assets/images/spinner3.svg" alt="Your Logo">
    </div>
    <div class="loading-text">Please wait, we are getting information...</div>
</ngx-spinner>
<div class="page-content page-content-main">
  <div class="row">
    <div class="col-xs-12 col-lg-12">
      <span class="breadcrumb-left">
        <h1 class="login-headline font-weight-bold top-bread-heading">Eligibility Check</h1>
      </span>
      <span class="breadcrumb-right">
        <ol class="breadcrumb">
          <ng-container *ngIf="user == 'admin'">
            <li class="breadcrumb-item"><a routerLink="/adlp/admin"><i class="bx bx-home-circle"></i></a></li>
          </ng-container>
          <ng-container *ngIf="user == 'role_consumer_fleet' || user == 'role_user_fleet'">
            <li class="breadcrumb-item"><a routerLink="/adlp/admin/admindashboard/dashboardfleet"><i class="bx bx-home-circle"></i></a></li>
          </ng-container>
          <li class="breadcrumb-item text-selected" aria-current="page">Eligibility Check</li>
        </ol>
      </span>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12 col-lg-12">
      <div class="row mrtop-12">
        <div class="col-xs-12 col-lg-9 mrtop-18">
          <p class="listP">
            CerebrumX's VIN eligibility allows users to verify which vehicles in their fleet are connected vehicles and
            can provide data to OEMs. CerebrumX provides users with the option to check individual vehicle eligibility
            or bulk eligibility for an entire fleet.</p>
        </div>
        <div class="col-xs-12 col-lg-3">
          <button type="submit" class="data-demo-history btn-primary btn-check-history" *ngIf="dataNew"
            (click)="bulkModel(bulkVinCheckModel)">Check Eligibility History</button>
            <button type="submit" class="data-demo-history btn-primary btn-check-history" *nfIf="dataNewOne"
            (click)="bulkModel(bulkVinCheckModel)">Check Eligibility History</button>
        </div>
      </div>
       <div class="row" style="margin-top:35px">
        <div class="col-xs-12 col-lg-12">
          <div class="card" style="border-top-left-radius: 0px;
          border-top-right-radius: 0px;">
            <div class="card-body">
                <ul class="nav nav-tabs" role="tablist" style="margin-top: -58px; margin-left: -20px;
                margin-right: -20px;">
                  <li class="nav-item" style="font-family: 'Poppins'; position: relative;">
                    <a class="nav-link active triangle triangle-top-right" data-bs-toggle="tab" href="#home" role="tab" aria-selected="true" style="position: relative; overflow: hidden;width: 130px;">
                        <span class="d-block d-sm-none"><i class="fas fa-home"></i></span>
                        <span class="d-none d-sm-block">Single VIN</span>
                        <span class="border-right" style="position: absolute;
                        top: -31px;
                        right: -27px;
                        border-right: 47px solid transparent;
                        border-top: 72px solid #f8f8fb;
                        transform: rotate(-35deg);
                    "></span>
                    </a>
                </li>
                    <li class="nav-item" style="font-family: 'Poppins';">
                        <a class="nav-link" data-bs-toggle="tab" href="#profile" role="tab" aria-selected="false" style="position: relative; overflow: hidden;width: 130px;" (click)="onTabButtonClick();">
                            <span class="d-block d-sm-none"><i class="far fa-user"></i></span>
                            <span class="d-none d-sm-block">Bulk VIN</span>
                            <span class="border-right" style="position: absolute;
                            top: -31px;
                            right: -27px;
                            border-right: 47px solid transparent;
                            border-top: 72px solid #f8f8fb;
                            transform: rotate(-35deg);
                        "></span>
                        </a>
                    </li>
                </ul>

                <div class="tab-content p-3 text-muted">
                    <div class="tab-pane active" id="home" role="tabpanel">
                      <div class="row" style="margin-top: 20px;">
                        <div class="col-xs-12 col-lg-4">
                          <div class="card">
                            <div class="card-body">
                              <h4 class="leading-sec" style="text-align: center; font-size: 18px; font-weight: 600; font-family: 'Poppins';">Single VIN
                                Eligibility</h4>
                              <div class="row" style=" margin-top:20px;">
                                <div class=" col-xs-12 col-lg-12 card-text fleet-telemetryp"
                                  style="text-align: center!important; line-height: 28px; font-size: 14px; font-family: 'Poppins'">
                                  Please enter VIN of the vehicle<br> to check its eligibility.
                                </div>
                              </div>
                              <form [formGroup]="enrollMentCheckForm" (ngSubmit)="checkVin(enrollMentCheckForm.value)">
                                <div class="row" style="margin-top: 50px;">
                                  <div class="col-xs-12 col-lg-1">&nbsp;</div>
                                  <div class="col-xs-12 col-lg-10">
                                    <input class="form-control" (keyup)="checkVin1($event.target.value)" formControlName="vins"
                                      maxlength="17" type="text" placeholder="Enter VIN" (paste)="validateMaskIng(this,$event)"
                                      (keypress)="numbersOnlyUpto($event)">
                                  </div>
                                </div>
                                <div class="row" style="height: 20px;">
                                  <ng-container class="mar-re" style="line-height: 10px;"
                                    *ngIf="enrollMentCheckForm.controls['vins'].touched && !enrollMentCheckForm.controls['vins'].valid">
                                    <small class="text-danger mar-ab" *ngIf="enrollMentCheckForm.controls['vins'].hasError('required')">
                                      Please Enter VIN
                                    </small>
                                  </ng-container>
                                  <small class="text-danger mar-ab" style="line-height: 10px;"
                                    *ngIf="enrollMentCheckForm.controls['vins'].hasError('pattern') || !validationVIN">
                                    Please insert Valid VIN
                                  </small>
                                  <small class="mar-ab check-vin" *ngIf="vinDataLoad">
                                    Checking VIN Status <i class="fa fa-spinner fa-spin" style="font-size: 12px;"></i>
                                  </small>
                                </div>
                                <div class="row">
                                  <div class="col-xs-12 col-lg-12 cta-link center-button">
                                    <button type="submit" class="data-demo" [disabled]="!enrollMentCheckForm.valid || !validationVIN">Submit</button>

                                  </div>
                                </div>
                              </form>
                            </div>
                          </div>
                        </div>
                        <div class="col-xs-12 col-lg-1">
                        &nbsp;
                        </div>
                        <div class="col-xs-12 col-lg-7" style="margin-left: -30px;">
                          <h4 class="leading-sec" style="text-align: center; font-size: 18px; font-weight: 600; font-family: 'Poppins'; margin-top: 20px;">VIN Status</h4>

                          <div class="row eligible-vin">
                            <div class="col-xs-12 col-lg-12">
                              <span class="fl-left">
                                <ng-container *ngIf="eligiblity != 'True' && eligiblity != 'False'"><h4 class="heading-status">VIN : <span class="heading-status-nodata">1FT********996</span></h4></ng-container>
                                <ng-container *ngIf="eligiblity == 'True'"><h4 class="heading-status">VIN :<span class="heading-status-true">{{vinId}} <sup><i class="mdi mdi-check-decagram"></i></sup></span></h4></ng-container>
                                <ng-container *ngIf="eligiblity == 'False'"><h4 class="heading-status-no">VIN :<span class="heading-status-no">{{vinId}} <sup><i class="mdi mdi-close-circle"></i></sup></span></h4></ng-container>
                             </span>
                              <span class="fr-right">
                                  <h4 class="heading-status-nodata" *ngIf="eligiblity != 'True' && eligiblity != 'False'">VIN Status not found</h4>
                                  <h4 class="right-heading" *ngIf="eligiblity == 'True'">VIN eligible for enrollment</h4>
                                  <h4 class="left-heading" *ngIf="eligiblity == 'False'">VIN not eligible for enrollment</h4>
                              </span>
                            </div>
                          </div>

                          <div class="row" style="margin-top: 12px;">
                            <div class="col-xs-12 col-lg-8" style="margin-left: -12px;">
                              <div class="row">
                                <div class="col-md">
                                  <div class="box5" *ngIf="eligiblityData?.make != null">
                                    <h5 class="center-heading-data heading-box">Make</h5>
                                    <h4 class="heading-box-data">{{eligiblityData?.make}}
                                      <ng-container *ngIf="eligiblityData?.make == null"><a style="color:red">N/A</a></ng-container>
                                    </h4>
                                  </div>
                                  <div class="box5-null" *ngIf="eligiblityData?.make == null">
                                    <h5 class="center-heading-data heading-box" style="color:rgb(206, 205, 205)">Make</h5>
                                    <h4 class="heading-box-data">
                                      <ng-container *ngIf="eligiblityData?.make == null"><a style="color:rgb(206, 205, 205)">No Data Found</a></ng-container>
                                    </h4>
                                  </div>
                                </div>
                                <div class="col-md">
                                  <div class="box6" *ngIf="eligiblityData?.model != null">
                                    <h5 class="center-heading-data heading-box">Model</h5>
                                    <h4 class="heading-box-data">{{eligiblityData?.model}}
                                      <ng-container *ngIf="eligiblityData?.model == null"><a style="color:red">N/A</a></ng-container>
                                    </h4>
                                  </div>
                                  <div class="box5-null" *ngIf="eligiblityData?.model == null">
                                    <h5 class="center-heading-data heading-box" style="color:rgb(206, 205, 205)">Model</h5>
                                    <h4 class="heading-box-data">
                                      <ng-container *ngIf="eligiblityData?.make == null"><a style="color:rgb(206, 205, 205)">No Data Found</a></ng-container>
                                    </h4>
                                  </div>
                                </div>
                              </div>
                              <div class="row" style="margin-top: 12px;">
                                <div class="col-md">
                                  <div class="box7" *ngIf="eligiblityData?.trim != null">
                                    <h5 class="center-heading-data heading-box">Trim</h5>
                                    <h4 class="heading-box-data">{{eligiblityData?.trim}}
                                      <ng-container *ngIf="eligiblityData?.trim == null"><a style="color:red">N/A</a></ng-container>
                                      <ng-container *ngIf="eligiblityData?.trim == ''"><a style="color:red">N/A</a></ng-container>
                                    </h4>
                                  </div>
                                  <div class="box5-null"*ngIf="eligiblityData?.trim == null">
                                    <h5 class="center-heading-data heading-box" style="color:rgb(206, 205, 205)">Trim</h5>
                                    <h4 class="heading-box-data">
                                      <ng-container *ngIf="eligiblityData?.trim == null"><a style="color:rgb(206, 205, 205)">No Data Found</a></ng-container>
                                    </h4>
                                  </div>
                                </div>
                                <div class="col-md">
                                  <div class="box8" *ngIf="eligiblityData?.year != null">
                                    <h5 class="center-heading-data heading-box">Year</h5>
                                    <h4 class="heading-box-data">{{eligiblityData?.year}}
                                      <ng-container *ngIf="eligiblityData?.year == null"><a style="color:red">N/A</a></ng-container>
                                    </h4>
                                  </div>
                                  <div class="box5-null" *ngIf="eligiblityData?.year == null">
                                    <h5 class="center-heading-data heading-box" style="color:rgb(206, 205, 205)">Year</h5>
                                    <h4 class="heading-box-data">
                                      <ng-container *ngIf="eligiblityData?.year == null"><a style="color:rgb(206, 205, 205)">No Data Found</a></ng-container>
                                    </h4>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="col-xs-12 col-lg-4">
                              <img src="../../../../assets/images/13_update.png" class="img-car">
                            </div>
                          </div>

                          </div>
                      </div>
                    </div>
                    <div class="tab-pane" id="profile" role="tabpanel">
                      <div class="row" style="margin-top: 20px;">
                        <div class="col-xs-12 col-lg-4"  style="margin-top: 66px;">
                          <div class="card">
                            <div class="card-body">
                              <h4 class="leading-sec" style="text-align: center; font-size: 18px; font-weight: 600; margin-top: -6px;font-family: 'Poppins'">
                                Bulk VIN Eligibility</h4>
                              <div class="row">
                                <div class="col-xs-12 col-lg-12 center-button">
                                  <a type="button" class="download-link" (click)="downloadSamples()">Download Sample
                                    File</a> &nbsp;&nbsp;
                                </div>
                              </div>
                              <form [formGroup]="bulkEnrollmentForm" (ngSubmit)="vinUplaod(bulkEnrollmentForm.value)">
                                <div class="row" style="margin-top: 24px;">
                                  <div class="col-xs-12 col-lg-1">&nbsp;</div>
                                  <div class="col-xs-12 col-lg-10">
                                    <div class="upload-box" *ngIf="!uplodMainBox">
                                      <input type="file" id="formFile" class="upload-icon" (change)="uploadFiles($event)"
                                        (click)="$event.target.value=null">
                                      <i *ngIf="!uploadIconClass" class="bx bx-cloud-upload main-icons center-button"
                                        style="margin-left: 39%;"></i>
                                      <i *ngIf="uploadIconClass" [ngClass]="uploadIconClass" class="bx bx-file main-icons center-button"
                                        style="margin-left: 39%;"></i>
                                      <h4 *ngIf="!uploadIconClass" class="upload-heading">Upload Data in .CSV Format</h4>
                                      <h4 *ngIf="uploadIconClass" class="upload-heading-file">{{fileName}}</h4>

                                    </div>
                                    <div class="upload-box-complete" *ngIf="uplodMainBox">
                                      <input type="file" id="formFile" class="upload-icon" (change)="uploadFiles($event)"
                                        (click)="$event.target.value=null">
                                      <i *ngIf="!uploadIconClass" class="bx bx-cloud-upload main-icons center-button"
                                        style="margin-left: 39%;"></i>
                                      <i *ngIf="uploadIconClass" [ngClass]="uploadIconClass" class="bx bx-file main-icons center-button"
                                        style="margin-left: 39%;"></i>
                                      <h4 *ngIf="uplodMainBox" class="upload-heading-file-final">File Successfully Submitted</h4>
                                    </div>
                                  </div>
                                </div>
                                <div class="row" style="    margin-top: 20px;">
                                  <div class="col-xs-12 col-lg-12 cta-link center-button">
                                    <ng-container *ngIf="!uploadIconClass">
                                      <button type="submit" class="data-demo" [disabled]="IsDisabled">Submit</button>
                                    </ng-container>
                                    <ng-container *ngIf="uploadIconClass">
                                      <button type="submit" class="data-demo-upload" [disabled]="IsDisabled">Submit</button>
                                    </ng-container>
                                  </div>
                                </div>
                              </form>
                            </div>
                          </div>
                        </div>
                        <div class="col-xs-12 col-lg-8">
                          <div class="row">
                            <div class="col-xs-12 col-lg-12">
                              <span style="float: left;"><h5 class="leading-sec" style="font-size: 18px; font-weight: 600; margin-top: -6px;font-family: 'Poppins'">Summary</h5></span>
                              <!-- <span style="float: right;">
                                <button type="submit" class="data-demo-history btn-primary" style="margin-top: -16px!important;">
                                Download Summary
                              </button>
                               </span> -->
                            </div>
                          </div>
                          <div class="table-responsive" style="height: 381px; overflow: hidden;">
                            <table class="table table table-striped table-bordered">
                              <tbody style="font-size: 12px; font-family: 'Poppins';">
                                <tr>
                                  <td class="summaryone">Total VINs uploaded</td>
                                  <td class="summarytwo">
                                    <ng-container *ngIf="totalVinCountUplaoded == null">0</ng-container>
                                    <ng-container *ngIf="totalVinCountUplaoded != null">{{totalVinCountUplaoded}}</ng-container></td>
                                  <td></td>
                                </tr>
                                <tr>
                                  <td class="summaryone">Duplicate VINs</td>
                                  <td class="summarytwo">
                                    <ng-container *ngIf="duplicateVin == null">0</ng-container>
                                    <ng-container *ngIf="duplicateVin != null">{{duplicateVin}}</ng-container></td>
                                  <td>VINs with multiple entries</td>
                                </tr>
                                <tr>
                                  <td class="summaryone">Invalid/Incorrect VINs</td>
                                  <td class="summarytwo">
                                    <ng-container *ngIf="invalidVinCounts == null">0</ng-container>
                                    <ng-container *ngIf="invalidVinCounts != null">{{invalidVinCounts}}</ng-container>
                                  </td>
                                  <td>VINs that are not as per the NHTSA guidelines</td>
                                </tr>
                                <tr>
                                  <td class="summaryone">Non-Addressable VINs by CerebrumX</td>
                                  <td class="summarytwo">
                                    <ng-container *ngIf="nonAddressableVin == null">0</ng-container>
                                    <ng-container *ngIf="nonAddressableVin != null">{{nonAddressableVin}}</ng-container></td>
                                  <td>VINs outside of Ford Pro, GM, Stellantis, Toyota & Tesla</td>
                                </tr>
                                <tr>
                                  <td class="summaryone">Addressable VINs by CerebrumX</td>
                                  <td class="summarytwo">
                                    <ng-container *ngIf="oemMakeCount == null">0</ng-container>
                                    <ng-container *ngIf="oemMakeCount != null">{{oemMakeCount}}</ng-container></td>
                                  <td>VINs part of Ford Pro, GM, Stellantis, Toyota & Tesla</td>
                                </tr>
                                <tr>
                                  <td class="summaryone">Non-Compliant VINs</td>
                                  <td class="summarytwo">
                                    <ng-container *ngIf="nonComplaintVin == null">0</ng-container>
                                    <ng-container *ngIf="nonComplaintVin != null">{{nonComplaintVin}}</ng-container></td>
                                  <td>VINs outside the (Model/Year) compatibility guidelines of the OEMs</td>
                                </tr>
                                <tr>
                                  <td class="summaryone">Compliant VINs</td>
                                  <td class="summarytwo">
                                    <ng-container *ngIf="complaintVin == null">0</ng-container>
                                    <ng-container *ngIf="complaintVin != null">{{complaintVin}}</ng-container></td>
                                  <td>VINs within the compatibility guidelines of the OEMs</td>
                                </tr>
                                <tr>
                                  <td class="summaryone">Eligible VINs</td>
                                  <td class="summarytwo">
                                    <ng-container *ngIf="eligibleVin == null">0</ng-container>
                                    <ng-container *ngIf="eligibleVin != null">{{eligibleVin}}</ng-container></td>
                                  <td>VINs that are connected and eligible for data onboarding</td>
                                </tr>
                              </tbody>
                              </table>
                              </div>
                        </div>
                      </div>
                      <div class="row" style="margin-top: 30px; margin-bottom: 30px;">
                        <div class="col-xs-12 col-lg-3">&nbsp;</div>
                        <div class="col-xs-12 col-lg-6"><img src="../../../../assets/images/dashedline.svg" style="margin-left: 16%;"></div>
                        <div class="col-xs-12 col-lg-3">&nbsp;</div>
                      </div>
                      <div class="row" style="margin-top: 36px;" id="scrollTarget">
                        <ng-container *ngIf="dataform">
                          <div class="row">
                          <div class="col-xs-12 col-lg-8">
                            <span style="float: left;">
                              <h4 class="leading-sec small-heading">Last file uploaded: <span class="small-heading-new">{{selectedId}}</span>
                              </h4>
                            </span>
                          </div>
                          <div class="col-xs-12 col-lg-4">
                            <span class="small-heading" style="float: right; margin-top:-7px">Last File Uploaded Date: <span class="small-heading-new" style="line-height: 34px;">{{formattedDate}},{{formattedTime}}</span></span>
                          </div>
                        </div>
                          <div class="row">
                            <div class="col-xs-12 col-lg-8">
                              <ng-container *ngIf="status ==  'IN_PROGRESS'">
                                <div class="status-container">
                                  <span style="font-size: 14px!important; font-weight: 600!important; color:#000000;font-family: 'Poppins';">Current
                                    Status:</span>
                                  <span class="status-text" style="font-family: 'Poppins'; margin-left: 6px;"> In Progress</span>
                                  <div class="typing-indicator" style="padding-top: 11px!important;">
                                    <span class="dot" id="dot1"></span>
                                    <span class="dot" id="dot2"></span>
                                    <span class="dot" id="dot3"></span>
                                    <span class="dot" id="dot4"></span>
                                  </div>
                                </div>
                              </ng-container>
                              <ng-container *ngIf="status ==  'FAILED'">
                                <span style="font-size: 14px!important; font-weight: 600!important; color:#000000; font-family: 'Poppins'">Current
                                  Status:</span><span
                                  style="font-size: 14px!important; font-weight: 600!important; color:red; margin-left: 6px; font-family: 'Poppins'">Failed</span>
                              </ng-container>
                              <ng-container *ngIf="status ==  'COMPLETED'">
                                <span style="font-size: 14px!important; font-weight: 600!important; color:#000000;font-family: 'Poppins'">Current
                                  Status:</span><span
                                  style="font-size: 14px!important; font-weight: 600!important; color:#45B01F;margin-left: 6px;font-family: 'Poppins'">Completed</span></ng-container>
                            </div>
                            <div class="col-xs-12 col-lg-4">
                              <span class="small-heading" style="float: right; margin-top:-7px">Total VINs Uploaded: <span class="small-heading-new" style="line-height: 34px;">{{totalVinCountUplaoded}}</span></span>
                            </div>
                          </div>
                        </ng-container>
                        <ng-container *ngIf="submitBtn">
                          <div class="row">
                          <div class="col-xs-12 col-lg-8">
                          <h4 class="leading-sec" style="font-size: 14px; font-weight: 600; font-family: 'Poppins'; color:#000000">Current file uploaded: <span
                              style="font-size: 14px!important; font-weight: 500!important; padding-left: 6px; font-family: 'Poppins'" class="small-heading-new">{{selectedId}}</span>
                          </h4>
                        </div>
                          <div class="col-xs-12 col-lg-4">
                            <span class="small-heading" style="float: right;">File Uploaded Date: <span class="small-heading-new" style="line-height: 34px;">{{uploadedDate | date:'medium'}}</span></span>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-xs-12 col-lg-8">
                            <ng-container *ngIf="dataHideShow">

                              <div class="status-container">
                                <span style="font-size: 14px!important; font-weight: 600!important; color:#000000;font-family: 'Poppins';">Current
                                  Status:</span>
                                <span class="status-text" style="font-family: 'Poppins'; margin-left: 6px;"> In Progress</span>
                                <div class="typing-indicator" style="padding-top: 11px!important;">
                                  <span class="dot" id="dot1"></span>
                                  <span class="dot" id="dot2"></span>
                                  <span class="dot" id="dot3"></span>
                                  <span class="dot" id="dot4"></span>
                                </div>
                              </div>
                            </ng-container>
                            <ng-container *ngIf="dataHideShowMore">
                              <span style="font-size: 14px!important; font-weight: 600!important; color:#000000; font-family: 'Poppins'">Current
                                Status:</span><span
                                style="font-size: 14px!important; font-weight: 600!important; color:#45B01F; margin-left: 6px; font-family: 'Poppins'">Completed</span>
                            </ng-container>
                          </div>
                          <div class="col-xs-12 col-lg-4">
                            <span class="small-heading" style="float: right;">Total VINs Uploaded: <span class="small-heading-new" style="line-height: 34px;">{{totalVins}}</span></span>
                          </div>
                        </div>

                        </ng-container>
                      </div>
                      <ng-container>
                        <div class="row" style="margin-left: 12px; height: auto; margin-top: 40px;">
                          <div class="col-xs-12 col-lg-4">
                                <h5 class="heading-data-chart">Total VINs by Make</h5>
                                <div style="margin-top: 21px;">
                                <ng-container *ngIf="donutchart2">
                                  <apx-chart class="apex-charts" dir="ltr" [series]="donutchart2?.series"
                                    [chart]="donutchart2?.chart" [labels]="donutchart2?.labels" [legend]="donutchart2?.legend"
                                    [colors]="donutchart2?.colors" [responsive]="donutchart2?.responsive">
                                  </apx-chart>
                                </ng-container>
                              </div>
                          </div>
                          <div class="col-xs-12 col-lg-1 vertical-line ">&nbsp;</div>
                          <div class="col-xs-12 col-lg-7">
                             <h5 class="heading-vinbrakeup">Bulk Eligibility Check Progress</h5>
                            <div class="progress-bars-container" style=" margin-top: 30px;">
                              <div class="row">
                                <div class="col-xs-12 col-lg-4">
                                  <span class="heading-green">&nbsp;</span>
                                  <span class="heading-breakup"> Eligibile VINs</span>
                                </div>
                                <div class="col-xs-12 col-lg-4" style="margin-left: -25px;">
                                  <span class="heading-red">&nbsp;</span>
                                  <span class="heading-breakup"> Ineligibile VINs</span>
                                </div>
                                <div class="col-xs-12 col-lg-4" style="margin-left: -25px;">
                                  <ng-container *ngIf="dataHideShowMore"><span class="heading-ember">&nbsp;</span></ng-container>
                                  <ng-container *ngIf="dataHideShow"><span style="float: left; margin-top: -1px; margin-left: -14px;"><i class="bx bx-dots-horizontal-rounded bx-spin" style="font-size: 16px; color: #c1b370;"></i></span></ng-container>
                                  <span class="heading-breakup" style="float: left;"> In Progress VINs</span>
                                </div>
                              </div>
                              <div style="margin-top: 35px;">
                              <div *ngFor="let oem of oemData" class="progress-bar-item">
                                <h3 class="heading-progressbar">{{ oem.oem}} - <a style="color:#000000; font-weight: 600;">{{oem.totalVinCount}}</a></h3>
                               <div class="row">
                                    <div class="col-xs-12 col-lg-4" style="margin-right: -12px;">
                                      <progress max="{{ oem.totalVinCount }}"  value="{{ oem.successCount }}" [style.width.%]="100"[ngStyle]="{'background-color': progressBarColor}" class="progress-bar-1"></progress>
                                    </div>
                                    <div class="col-xs-12 col-lg-4" style="margin-left:-11px;margin-right: -12px; border-radius: 0 10px 10px 0;">
                                      <progress  max="{{ oem.totalVinCount }}" value="{{ oem.failedCount }}" [style.width.%]="100"[ngStyle]="{'background-color': progressBarColor}" class="progress-bar-2"></progress>
                                    </div>

                                    <div class="col-xs-12 col-lg-4" style="margin-left:-11px;margin-right: -12px; border-radius: 50px;">
                                      <progress  max="{{ oem.totalVinCount }}" value="{{ oem.pendingCount }}" [style.width.%]="100"[ngStyle]="{'background-color': progressBarColor}" class="progress-bar-3"></progress>
                                    </div>
                                  </div>
                                <div class="row">
                                  <div class="col-xs-12 col-lg-4">
                                    <span class="label" style=" float: left!important; color:#45B01F; font-weight: 600;">{{ oem.successCount }}</span>
                                  </div>
                                  <div class="col-xs-12 col-lg-4">
                                    <span class="label" style="float: left!important; margin-left: -20px;color:#ff0000; font-weight: 600;">{{ oem.failedCount }}</span>
                                  </div>
                                  <div class="col-xs-12 col-lg-4">
                                    <span class="label" style="float: left!important;margin-left: -40px; color:#ecde9f; font-weight: 600;">{{ oem.pendingCount }}</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                            </div>
                          </div>
                        </div>
                        <ng-container *ngIf="dataform">
                          <div class="row" style="margin-top: 24px;">
                            <div class="col-xs-12 col-lg-4">&nbsp;</div>
                            <div class="col-xs-12 col-lg-1">&nbsp;</div>
                            <div class="col-xs-12 col-lg-7  text-center">
                              <button type="submit" [disabled]="status == 'IN_PROGRESS'" class="data-demo-history btn-primary"
                                [ngStyle]="{ 'border-color': (status === 'COMPLETED' ? '#ef8321' : ''), 'color': (status === 'COMPLETED' ? '#3f8321' : '') }"
                                (click)="geteligibleVin(selectedId)" style="margin-top: -16px!important;">
                                Download Detailed Summary
                              </button>
                            </div>
                          </div>
                        </ng-container>
                        <!-- <ng-container *ngIf="submitBtn">
                          <div class="row" style="margin-top: 24px;" *ngIf="!dataHideShowMore">
                          <div class="row" style="margin-top: 24px;">
                            <div class="col-xs-12 col-lg-4">&nbsp;</div>
                            <div class="col-xs-12 col-lg-1">&nbsp;</div>
                            <div class="col-xs-12 col-lg-7 text-center">
                              <button type="submit" class="data-demo-history btn-primary"
                              (click)="geteligibleVin(selectedId)" disabled style="margin-top: -16px!important;">
                              Download Detailed Summary
                            </button>
                            </div>
                          </div>
                          </div>
                        </ng-container> -->
                        <ng-container *ngIf="submitBtn">
                          <div class="row" style="margin-top: 24px;" *ngIf="dataHideShowMore">
                          <div class="row" style="margin-top: 24px;">
                            <div class="col-xs-12 col-lg-4">&nbsp;</div>
                            <div class="col-xs-12 col-lg-1">&nbsp;</div>
                            <div class="col-xs-12 col-lg-7 text-center">
                              <button type="submit"class="data-demo-history-green btn-primary" *ngIf="isButtonRefreshed"
                              (click)="geteligibleVin(selectedId)" style="margin-top: -16px!important;">
                              Download Detailed Summary
                            </button>
                            </div>
                          </div>
                          </div>
                        </ng-container>
                      </ng-container>
                    </div>
                </div>

            </div>
        </div>
        </div>
      </div>

    </div>
  </div>
</div>
<ng-template #bulkVinCheckModel let-modal>
  <div class="modal-header">
    <h5>Bulk Eligibility Status</h5>
    <button type="button" class="btn-close" data-dismiss="modal" (click)="modal.dismiss('Cross click')"
      aria-hidden="true"></button>
  </div>
  <div class="modal-body">
    <div class="row" style="margin-bottom: 12px;">
      <div class="col-xs-12 col-lg-4">
        <input class="form-control " type="text" placeholder="Search by ID & Provider" [(ngModel)]="searchId">
      </div>
    </div>
    <div class="row" style="margin-bottom: 20px;">
      <div class="col-xs-12 col-lg-12">
        <div class="table-responsive" style="height: 360px;">
          <table id="datatable-buttons" class="table table-bordered">
            <thead class="table-light event-table">
              <tr>
                <th>ID</th>
                <th>Number of VIN</th>
                <th>Owner</th>
                <th>State</th>
                <th>Download</th>
              </tr>
            </thead>
            <tbody>
              <tr
                *ngFor="let listItem of bulkData | searchbyId: searchId |  slice: (page-1) * pageSize : page * pageSize">
                <td>{{listItem?.id}}</td>
                <td>{{listItem?.numberOfVins}}</td>
                <td>{{listItem?.requestRecdFrom}}</td>
                <ng-container *ngIf="listItem?.state == 'IN_PROGRESS'">
                  <td style="color: #f37721"><i class="bx bx-dots-horizontal-rounded bx-spin"
                      style="font-size: 20px;"></i>In Progress</td>
                </ng-container>
                <ng-container *ngIf="listItem?.state == 'FAILED'">
                  <td style="color: red"> Failed</td>
                </ng-container>
                <ng-container *ngIf="listItem?.state == 'COMPLETED'">
                  <td style="color: green">Completed</td>
                </ng-container>
                <td>
                  <button [disabled]="listItem?.state !== 'COMPLETED'" type="button"
                    class="btn btn-outline-success waves-effect waves-light btn-hi" style="height: 35px!important;
                    width: 35px!important;">
                    <i class="bx bx-download font-size-16 align-middle me-2 uplaod-btn"
                      (click)="geteligibleVin(listItem?.id);summaryDownload(listItem?.id)"></i>
                  </button>
                </td>
                <!-- <td>
                  <button [disabled]="listItem?.state !== 'COMPLETED'" type="button"
                    class="btn btn-outline-success waves-effect waves-light btn-hi" style="height: 35px!important;
                    width: 35px!important;">
                    <i class="bx bx-download font-size-16 align-middle me-2 uplaod-btn"
                    (click)="geteligibleVinNew(listItem?.id)"></i>
                  </button>
                </td> -->

              </tr>
            </tbody>
            <tbody *ngIf="loading">
              <ng-container>
                <tr *ngIf="(bulkData | searchbyId: searchId)?.length < 1">
                  <td colspan="8">
                    <h5 style="text-align: center;"> No Data Found ...</h5>
                  </td>
                </tr>
              </ng-container>
            </tbody>
          </table>
        </div>
        <div class="mt-2 text-end">
          <span style="float: right">
            <ngb-pagination [collectionSize]="(bulkData | searchbyId: searchId)?.length" [(page)]="page"
              [pageSize]="pageSize">
            </ngb-pagination>
          </span>
          <span style="float: left">
            <select class="form-select" style="width: auto" [(ngModel)]="pageSize">
              <option [ngValue]="5">5</option>
              <option [ngValue]="10">10</option>
              <option [ngValue]="20">20</option>
              <option [ngValue]="40">40</option>
              <option [ngValue]="80">80</option>
              <option [ngValue]="100">100</option>
            </select>
          </span>
          <span class="pageination">Per Pages</span>
        </div>
      </div>
    </div>
  </div>
</ng-template>
<ng-template #alertModel let-modal>
  <div class="modal-header">
    <h5 style="font-size: 16px; font-family: 'Poppins'; font-weight: 600; color:#ff0000;padding-top: 10px;">Alert</h5>
    <button type="button" class="btn-close" data-dismiss="modal" (click)="modal.dismiss('Cross click')"
      aria-hidden="true"></button>
  </div>
  <div class="modal-body">
    <div class="row" style="margin-bottom: 12px; font-size: 13px; margin-left: 12px; margin-right: 12px; font-family: 'Poppins'; font-weight: 400;">
      GM  VIN eligibility is currently down. Weâ€™re working with the OEM to resolve this.
      <br>
      <span class="alerts-text">*No impact on other OEMs</span>
    </div>
  </div>
  <div class="modal-footer">
    <div class="row">
    <div class="col-xs-12 col-lg-9">&nbsp;</div>
    <div class="col-xs-12 col-lg-3">
      <button type="submit" class="btn-login-submit ok-btn" (click)="modal.dismiss('Cross click')">Ok</button>
    </div>
    </div>
  </div>
</ng-template>
