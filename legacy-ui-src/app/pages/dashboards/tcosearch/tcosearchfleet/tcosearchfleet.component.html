<div class="page-content page-content-main">
    <div class="row sideMenuItem">
        <div class="container">
          <!--Left side menu end-->
            <div class="col-xs-12 content-right">
            <div class="row">
                <div class="col-xs-12 col-lg-12">
                    <span class="breadcrumb-left" style="width: 60%;">
                        <h1 class="login-headline heading-title">Projected
                            <span class="heading-title-small">TCO</span>
                          </h1>
                          <ng-container *ngIf="user == 'role_consumer_fleet'">
                            <ng-container *ngIf="customConsumer != 'Onwardfleet'">
                                <div class="row">
                                    <div class="col-xs-12 col-lg-3">
                                        <h1 class="activeSinceFleet">{{customConsumer}}
                                        </h1>
                                    </div>
                                    <div class="col-xs-12 col-lg-6" style="margin-left: 12px;">
                                        <h1 class="activeSinceFleet">Active Since:
                                          <ng-container *ngIf="customConsumer === 'Guidepoint'">05-04-2023</ng-container>
                                          <ng-container *ngIf="customConsumer === 'Smallboard'">07-13-2022</ng-container>
                                          <ng-container *ngIf="customConsumer === 'Assetworks'">07-14-2024</ng-container>
                                          <ng-container *ngIf="customConsumer === 'DPL Telematics'">06-25-2024</ng-container>
                                          <ng-container *ngIf="customConsumer === 'Btracking'">02-15-2024</ng-container>
                                        </h1>
                                    </div>
                                </div>
                                </ng-container>
                                <ng-container  *ngIf="customConsumer === 'Onwardfleet'">
                                    <div class="row">
                                        <div class="col-xs-12 col-lg-3">
                                            <h1 class="activeSinceFleet">Onward Connected
                                            </h1>
                                        </div>
                                        <div class="col-xs-12 col-lg-8" style="margin-left: 12px;">
                                            <h1 class="activeSinceFleet">Active Since:
                                              <ng-container *ngIf="customConsumer === 'Onwardfleet'">05-16-2024</ng-container>
                                            </h1>
                                        </div>
                                    </div>
                              </ng-container>
                        </ng-container>
                        <ng-container *ngIf="user == 'role_user_fleet'">
                            <div class="content-text">
                                <span class="vin_container">
                                  <span class="content-sub-text">Fleet Id</span>
                                </span>
                                <span class="content-sub-text2">{{fleetIdValueNew}}</span>
                              </div>
                        </ng-container>
                    </span>
                    <span class="breadcrumb-right mr-8">
                        <ol class="breadcrumb">
                          <li class="breadcrumb-item">
                            <a routerLink="/adlp/admin/admindashboard/dashboardfleet" class="breadcrumb-h6"><i class="bx bx-home-circle"></i></a>
                          </li>
                          <li class="breadcrumb-item inactive-bread"> <a routerLink="/adlp/admin/admindashboard/dashboardfleet">Dashboard</a></li>
                          <li class="breadcrumb-item text-selected active-bread">Projected TCO</li>
                        </ol>
                      </span>
                </div>
            </div>
            <div class="row" style="margin-top: 12px;">
                <div class="col-xs-12 col-lg-12">
                    <h5 class="newText">Total Cost of Ownership (TCO) for a fleet encompasses all costs associated with acquiring, operating, and maintaining a fleet of vehicles over their lifecycle. This includes initial purchase costs, maintenance, fuel, insurance, and state taxes.</h5>
                </div>
            </div>
            <ng-container *ngIf="user == 'role_consumer_fleet'">
            <div class="row" style="margin-top: 12px; margin-bottom: 24px;" >
                <div class="col-xs-12 col-lg-2">
                    <ng-select [searchable]="true" [clearable]="fleetIdData ? true : false" placeholder="Organization Id/Name" (change)="showDetails()"
                        [(ngModel)]="fleetIdData" class="value-ro  newSelect1">
                        <ng-option value="" disabled>Fleet Id</ng-option>
                        <ng-option *ngFor="let fleet of fleetList" value="{{fleet?.id}}">{{fleet?.id}} -
                            [{{fleet.name}}]</ng-option>
                    </ng-select>
                </div>
            </div>
        </ng-container>
            <div class="row" style="margin-top: 12px;">
                <div class="col-xs-12 col-lg-12">
                    <div class="card"
                        style="border-radius: 10px !important; border: 1px solid #DEE4ED !important; height: 95px!important;">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-xs-12 col-lg-3">
                                    <span class="f-le">
                                        <h4 class="card-title card-heading mb-4">Active Vehicles</h4>
                                        <h5 class="vehicle-count">{{totalCount}}</h5>
                                    </span>
                                </div>
                                <!-- <div class="col-xs-12 col-lg-9">
                                    <div class="row">
                                        <div class="col-xs-12 col-md">
                                            <ng-select
                                               style="font-family: 'Poppins';"
                                              [searchable]="true"
                                              [clearable]="true"
                                              (change)="getAllData()"
                                              [clearable]="oemData ? true : false"
                                              placeholder="Provider"
                                              [(ngModel)]="oemData">
                                              <ng-option [value]="''" disabled>Provider</ng-option>
                                              <ng-option *ngFor="let provider of providerData" [value]="provider?.providerName">{{provider?.providerName}}</ng-option>
                                            </ng-select>
                                          </div>


                                          <div class="col-xs-12 col-md">
                                            <div class="col-xs-12 col-md">
                                                <ng-select
                                                style="font-family: 'Poppins';"
                                                  [searchable]="true"
                                                  [clearable]="companyIdData ? true : false"
                                                  (change)="getAllData()"
                                                  placeholder="Make"
                                                  [(ngModel)]="companyIdData">
                                                  <ng-option [value]="''" disabled>Make</ng-option>
                                                  <ng-option *ngFor="let item of makeList" [value]="item.make">
                                                    {{item.make}}
                                                  </ng-option>
                                                </ng-select>
                                              </div>
                                          </div>


                                          <div class="col-xs-12 col-md">
                                            <ng-select
                                            style="font-family: 'Poppins';"
                                              [searchable]="true"
                                              [clearable]="modelIdData ? true : false"
                                              (change)="getAllData()"
                                              placeholder="Model"
                                              [(ngModel)]="modelIdData">
                                              <ng-option [value]="''" disabled>Model</ng-option>
                                              <ng-option *ngFor="let item of modelList" [value]="item.model">{{item.model}}</ng-option>
                                            </ng-select>
                                          </div>

                                          <div class="col-xs-12 col-md">
                                            <ng-select
                                            style="font-family: 'Poppins';"
                                              [searchable]="true"
                                              [clearable]="yearIdData ? true : false"
                                              (change)="getAllData()"
                                              placeholder="Year"
                                              [(ngModel)]="yearIdData">
                                              <ng-option [value]="''" disabled>Year</ng-option>
                                              <ng-option *ngFor="let item of yearList" [value]="item.year">{{item.year}}</ng-option>
                                            </ng-select>
                                          </div>
                                          <div class="col-xs-12 col-md">
                                            <ng-select
                                              [searchable]="true"
                                              [clearable]="primaryFuelTypeIdData ? true : false"
                                              (change)="getAllData()"
                                              placeholder="Fuel Type"
                                              [(ngModel)]="primaryFuelTypeIdData">
                                              <ng-option [value]="''" disabled>Fuel Type</ng-option>
                                              <ng-option *ngFor="let item of fuelTypeList" [value]="item.fuelType">{{item.fuelType}}</ng-option>
                                            </ng-select>
                                          </div>
                                          <div class="col-xs-12 col-md">
                                            <ng-select
                                            class="data-custom"
                                              [searchable]="true"
                                              [clearable]="stateIdData"
                                              (change)="onStateChange($event)"
                                              placeholder="All States"
                                              [(ngModel)]="stateIdData" style="font-family: 'Poppins'!important;">
                                              <ng-option [value]="''" disabled>All States</ng-option>
                                              <ng-option *ngFor="let item of stateList" [value]="item.state">{{ item.state }}</ng-option>
                                            </ng-select>
                                          </div>

                                      </div>

                                </div> -->
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-lg-12">
                   <h5 class="newText">
                    CerebrumX ML algorithms considers all the several factors and calculate a projected TCO, which is a critical metric to make informed decisions about fleet management, vehicle replacement, and cost-saving strategies</h5>
                </div>
            </div>

            <div class="row" style="margin-top: 36px; margin-bottom: 36px;">
                <div class="col-xs-12 col-lg-12">
                    <button
                        type="submit"
                        class="calciForVIN"
                        [ngClass]="{'active-btn': fleetIdData && !isTcoForVinActive}"
                        [disabled]="!fleetIdData"
                        (click)="tcoforFleets()">
                        Calculate TCO for Entire Fleet
                    </button>&nbsp;&nbsp;
                    <button
                        type="submit"
                        class="calciForVIN"
                        [ngClass]="{'active-btn': fleetIdData && isTcoForVinActive}"
                        [disabled]="!fleetIdData"
                        (click)="onTcoForVinClick(tcocalculate)">
                        Calculate TCO for VIN
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
</div>
<ng-template #tcocalculate let-modal>
    <div class="modal-header">
        <h4 class="modal-title" style="font-family: 'Poppins'; font-size: 14px;;">Calculate TCO For VIN</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <div class="row my-2 ">
            <div class="col-xs-12 col-lg-12">
                <ng-select [items]="vinList" bindLabel="alias" bindValue="vin" placeholder="Vehicle Name" style="font-family: 'Poppins'" [(ngModel)]="vinData">
                </ng-select>
            </div>
        </div>
    </div>
    <div class="modal-footer">
            <button type="submit" class="vin"
                (click)="modal.close('Save click'); tcoforVin();" [disabled]="!vinData">Submit</button>
        <!-- <button type="reset" class="btn btn-light m-1" (click)="modal.close('Close click')">Cancel</button> -->
    </div>
</ng-template>
