<div class="page-content page-content-main">
  <div class="row sideMenuItem">
    <div class="container">
      <!--Left side menu end-->
        <div class="col-xs-12 content-right">
            <div class="row">
                <div class="col-xs-12 col-lg-12">
                  <span class="breadcrumb-left">
                    <h1 class="login-headline heading-title">Projected TCO
                    </h1>
                  </span>
                  <span class="breadcrumb-right mr-8">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item">
                        <a routerLink="/adlp/admin" class="breadcrumb-h6"><i class="bx bx-home-circle"></i></a>
                      </li>
                      <li class="breadcrumb-item inactive-bread"><a routerLink="/adlp/admin/dashboardAdmin">Dashboard</a></li>
                      <li class="breadcrumb-item text-selected active-bread">Projected TCO</li>
                    </ol>
                  </span>
                </div>
              </div>
            <div class="row">
                <div class="col-xs-12 col-lg-12">
                    <span class="breadcrumb-left">&nbsp;</span>
                </div>
                <ng-container *ngIf="user =='admin'">
                    <div class="col-xs-12 col-lg-2" style="    margin-top: -36px;
    margin-left: -10px;">
                    <!-- <ng-select class="no-border-background value-ro" style="width: 70%;" [searchable]="true"
                        [clearable]="true" placeholder="Consumer" (change)="selectConsumer($event)"
                        [(ngModel)]="defaultConsumer">
                        <ng-option value="" disabled hidden>Consumer</ng-option>
                        <ng-container *ngFor="let consumer of consumerList">
                            <ng-option value="{{consumer?.name}}">{{consumer?.name}}</ng-option>
                        </ng-container>
                    </ng-select>
                     -->
                     <app-common-consumer (consumerChange)="selectConsumer($event)"></app-common-consumer>
                </div>
                </ng-container>
                <ng-container *ngIf="user =='role_consumer_fleet'">
                    <div class="col-xs-12 col-lg-2">
                      <h1 class="consumer">{{customConsumer}}</h1>
                    </div>
                  </ng-container>
                     <div class="col-xs-12 col-lg-3" style="    margin-top: -36px;"><h5 class="activeSince">Active Since : {{ dateRange }}</h5></div>
                <div class="col-xs-12 col-lg-5"></div>
            </div>
            <div class="row" style="margin-top: 12px;">
                <div class="col-xs-12 col-lg-12">
                    <h5 class="newText">Total Cost of Ownership (TCO) for a fleet encompasses all costs associated with acquiring, operating, and maintaining a fleet of vehicles over their lifecycle. This includes initial purchase costs, maintenance, fuel, insurance, and state taxes.</h5>
                </div>
            </div>
            <div class="row" style="margin-top: 12px; margin-bottom: 24px;">
                <div class="col-xs-12 col-lg-2">
                    <ng-select [searchable]="true" [clearable]="fleetIdData ? true : false" placeholder="Organization Id/Name" (change)="showDetails()"
                        [(ngModel)]="fleetIdData" class="value-ro newSelect1">
                        <ng-option *ngFor="let fleet of fleetList" value="{{fleet?.id}}">{{fleet?.id}} -
                          [{{fleet.name}}]</ng-option>
                    </ng-select>
                </div>
            </div>
            <div class="row" style="margin-top: 12px;">
                <div class="col-xs-12 col-lg-12">
                    <div class="card"
                        style="border-radius: 10px !important; border: 1px solid #DEE4ED !important; height: 95px!important;">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-xs-12 col-lg-3">
                                    <span class="f-le">
                                        <h4 class="card-title card-heading mb-4">Active Vehicles</h4>
                                        <h5 class="vehicle-count">{{totalCount}}</h5>
                                    </span>
                                </div>
                                <div class="col-xs-12 col-lg-9">
                                    <div class="row">
                                        <div class="col-xs-12 col-md">
                                            <!-- <ng-select
                                               style="font-family: 'Poppins';"
                                              [searchable]="true"
                                              [clearable]="true"
                                              (change)="getAllData()"
                                              [clearable]="oemData ? true : false"
                                              placeholder="Provider"
                                              [(ngModel)]="oemData">
                                              <ng-option [value]="''" disabled>Provider</ng-option>
                                              <ng-option *ngFor="let provider of providerData" [value]="provider?.providerName">{{provider?.providerName}}</ng-option>
                                            </ng-select> -->
                                          </div>


                                          <div class="col-xs-12 col-md">
                                            <div class="col-xs-12 col-md">
                                                <!-- <ng-select
                                                style="font-family: 'Poppins';"
                                                  [searchable]="true"
                                                  [clearable]="companyIdData ? true : false"
                                                  (change)="getAllData()"
                                                  placeholder="Make"
                                                  [(ngModel)]="companyIdData">
                                                  <ng-option [value]="''" disabled>Make</ng-option>
                                                  <ng-option *ngFor="let item of makeList" [value]="item.make">
                                                    {{item.make}}
                                                  </ng-option>
                                                </ng-select> -->
                                              </div>
                                          </div>


                                          <div class="col-xs-12 col-md">
                                            <!-- <ng-select
                                            style="font-family: 'Poppins';"
                                              [searchable]="true"
                                              [clearable]="modelIdData ? true : false"
                                              (change)="getAllData()"
                                              placeholder="Model"
                                              [(ngModel)]="modelIdData">
                                              <ng-option [value]="''" disabled>Model</ng-option>
                                              <ng-option *ngFor="let item of modelList" [value]="item.model">{{item.model}}</ng-option>
                                            </ng-select> -->
                                          </div>

                                          <div class="col-xs-12 col-md">
                                            <!-- <ng-select
                                            style="font-family: 'Poppins';"
                                              [searchable]="true"
                                              [clearable]="yearIdData ? true : false"
                                              (change)="getAllData()"
                                              placeholder="Year"
                                              [(ngModel)]="yearIdData">
                                              <ng-option [value]="''" disabled>Year</ng-option>
                                              <ng-option *ngFor="let item of yearList" [value]="item.year">{{item.year}}</ng-option>
                                            </ng-select> -->
                                          </div>
                                          <div class="col-xs-12 col-md">
                                            <!-- <ng-select
                                              [searchable]="true"
                                              [clearable]="primaryFuelTypeIdData ? true : false"
                                              (change)="getAllData()"
                                              placeholder="Fuel Type"
                                              [(ngModel)]="primaryFuelTypeIdData">
                                              <ng-option [value]="''" disabled>Fuel Type</ng-option>
                                              <ng-option *ngFor="let item of fuelTypeList" [value]="item.fuelType">{{item.fuelType}}</ng-option>
                                            </ng-select> -->
                                          </div>
                                          <div class="col-xs-12 col-md">
                                            <!-- <ng-select
                                            class="data-custom"
                                              [searchable]="true"
                                              [clearable]="stateIdData"
                                              (change)="onStateChange($event)"
                                              placeholder="All States"
                                              [(ngModel)]="stateIdData">
                                              <ng-option [value]="''" disabled>All States</ng-option>
                                              <ng-option *ngFor="let item of stateList" [value]="item.state">{{ item.state }}</ng-option>
                                            </ng-select> -->
                                             <ng-select
                                               style="font-family: 'Poppins';"
                                              [searchable]="true"
                                              [clearable]="true"
                                              (change)="getAllData()"
                                              [clearable]="oemData ? true : false"
                                              placeholder="Provider"
                                              [(ngModel)]="oemData">
                                              <ng-option [value]="''" disabled>Provider</ng-option>
                                              <ng-option value="HINO">HINO</ng-option>
                                              <ng-option *ngFor="let provider of providerData" [value]="provider?.providerName">{{provider?.providerName}}</ng-option>
                                            </ng-select>
                                          </div>

                                      </div>

                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-lg-12">
                   <h5 class="newText">
                    CerebrumX ML algorithms considers all the several factors and calculate a projected TCO, which is a critical metric to make informed decisions about fleet management, vehicle replacement, and cost-saving strategies</h5>
                </div>
            </div>

            <div class="row" style="margin-top: 36px; margin-bottom: 36px;">
                <div class="col-xs-12 col-lg-12">
                    <button
                        type="submit"
                        class="calciForVIN"
                        [ngClass]="{'active-btn': fleetIdData && !isTcoForVinActive}"
                        [disabled]="!fleetIdData"
                        (click)="tcoforFleets()">
                        Calculate TCO for Entire Fleet
                    </button>&nbsp;&nbsp;
                    <button
                        type="submit"
                        class="calciForVIN"
                        [ngClass]="{'active-btn': fleetIdData && isTcoForVinActive}"
                        [disabled]="!fleetIdData"
                        (click)="onTcoForVinClick(tcocalculate)">
                        Calculate TCO for VIN
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

<ng-template #tcocalculate let-modal>
    <div class="modal-header">
        <h4 class="modal-title" style="font-family: 'Poppins'; font-size: 14px;;">Calculate TCO For VIN</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
        <div class="row my-2 ">
            <div class="col-xs-12 col-lg-12">
                <ng-select [items]="vinList" bindLabel="alias" bindValue="vin" placeholder="Vehicle Name" style="font-family: 'Poppins'" [(ngModel)]="vinData">
                </ng-select>
            </div>
        </div>
    </div>
    <div class="modal-footer">
            <button type="submit" class="vin"
                (click)="modal.close('Save click'); tcoforVin();" [disabled]="!vinData">Submit</button>
        <!-- <button type="reset" class="btn btn-light m-1" (click)="modal.close('Close click')">Cancel</button> -->
    </div>
</ng-template>
