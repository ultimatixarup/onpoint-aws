<!--Page main content-->
<div class="page-content page-content-main">
  <div class="row sideMenuItem">
    <div class="container">
      <!-- Main Content Right-->
      <div class="col-xs-12 content-right">
        <!-- Heading and Breadcrumb-->
        <div class="row">
          <div class="col-xs-12 col-lg-12">
            <span class="breadcrumb-left">
              <h1 class="login-headline heading-title">Edit Geofence</h1>
            </span>
            <span class="breadcrumb-right mr-8">
              <ol class="breadcrumb">
                <ng-container *ngIf="user =='admin'">
                  <li class="breadcrumb-item">
                    <a routerLink="/adlp/admin" class="breadcrumb-h6"><i class="bx bx-home-circle"></i></a>
                  </li>
                  <li class="breadcrumb-item inactive-bread"><a routerLink="/adlp/admin/dashboardAdmin">Dashboard</a>
                  </li>
                  <li class="breadcrumb-item text-selected active-bread"><a
                      routerLink="/adlp/admin/admindashboard/geoFenceSetup/geofence">Manage Geofence</a></li>
                  <li class="breadcrumb-item text-selected active-bread">Edit Geofence</li>
                </ng-container>
                <ng-container *ngIf="user !='admin'">
                  <li class="breadcrumb-item">
                    <a routerLink="/adlp/admin/admindashboard/dashboardfleet" class="breadcrumb-h6"><i
                        class="bx bx-home-circle"></i></a>
                  </li>
                  <li class="breadcrumb-item inactive-bread"><a
                      routerLink="/adlp/admin/admindashboard/dashboardfleet">Dashboard</a></li>
                  <li class="breadcrumb-item inactive-bread"><a
                      routerLink="/adlp/admin/admindashboard/geoFenceSetup/geofence">Manage Geofence</a></li>
                  <li class="breadcrumb-item text-selected active-bread">Edit Geofence</li>
                </ng-container>
              </ol>
            </span>
          </div>
        </div>
        <!-- Heading and Breadcrumb End-->
        <!-- Edit Geofence -->
        <form [formGroup]="geofenceForm">
          <div class="row">
            <div class="col-5">
              <div class="card">
                <!-- Edit name and location type-->
                <div class="row editLine">
                  <div class="col-7">
                    <input type="text" formControlName="name" class="form-input editBack" id="" placeholder="Enter Geofence name"
                      readonly />

                  </div>
                  <div class="col-5">
                    <input placeholder="Enter Location Type" formControlName="locationType" type="text"
                      class="form-input" />
                      <div *ngIf="geofenceForm.get('locationType')?.touched && geofenceForm.get('locationType')?.hasError('required')" class="error">
                        Enter location type
                      </div>
                  </div>
                </div>
                <!-- Edit name and location type end-->
                <!-- Geofence type and radius-->
                <div class="row editMar-126">
                  <div class="col-xs-12 col-lg-6">
                    <label class="form-label geofenceAdd">Geofence Type</label>
                    <ng-select [items]="geofenceTypes" bindLabel="label" bindValue="value" placeholder="Geofence Type"
                      formControlName="geofenceType">
                    </ng-select>
                    <div *ngIf="geofenceForm.get('geofenceType')?.touched && geofenceForm.get('geofenceType')?.hasError('required')" class="error">
                      Select geofence type
                    </div>
                  </div>
                  <!-- Radius Input for Circle -->
                  <div class="col-xs-12 col-lg-6" *ngIf="selectedGeofenceType === 'CIRCLE'">
                    <label class="form-label geofenceAdd">Radius (in meters)</label>
                    <input readonly type="number" formControlName="radius" class="form-input editBack" placeholder="Radius"/>
                  </div>
                </div>
                <!-- Geofence type and radius end-->
                <!-- Address from map-->
                <div class="row editMar">
                  <div class="col-xs-12 col-lg-12">
                    <label class="form-label geofenceAdd">Address </label>
                    <input #addressInput id="address" type="text" class="form-input editBack" placeholder="Address"
                      formControlName="address" autocomplete="off" readonly/>
                  </div>
                </div>
                <!-- Address from map end-->
                <!-- Latitude and longitude from map-->
                <div class="row editMar">
                  <div class="col-xs-12 col-lg-12">
                    <label class="form-label geofenceAdd">Selected Latitude/Longitude</label>
                    <input placeholder="Selected Latitude/Longitude" formControlName="latlng" type="textarea"
                      name="selectedLatLng" class="form-input editBack" readonly/>
                  </div>
                </div>
                <!-- Latitude and longitude from map end-->
                <!-- Speed limit-->
                <div class="row editMar" style="height: 75px;">
                  <div class="col-xs-12 col-lg-12">
                    <label class="form-label geofenceAdd">Speed Limit (mph)</label>
                    <input placeholder="Enter speed" formControlName="speedLimit" type="number" class="form-input" />
                    <div *ngIf="geofenceForm.get('speedLimit')?.errors?.['max'] && geofenceForm.get('speedLimit')?.touched" class="editMar-126">
                      Speed should be less than 200
                    </div>
                  </div>
                </div>
                <!-- Speed limit end-->
                <!-- Form submit-->
                <div class="buttonend editMar-12">
                  <button class="gray-button" (click)="validateBeforeSubmit(errorModal)"> Update Geofence </button>
                </div>
                <!-- Form submit-->
                <!--Form Validation-->
                <ng-template #errorModal let-modal>
                  <div class="modal-header">
                    <h5 class="modal-title">Error</h5>
                    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                    </button>
                  </div>
                  <div class="modal-body modal-height">
                    <h5 class="heading-show" style="color: red;">{{ errorMessage }}</h5>
                  </div>
                </ng-template>
                <!--Form Validation end-->
              </div>
            </div>
            <!-- Map Drawing-->
            <div class="col-xs-12 col-lg-7">
              <div class="map-container">
                <agm-map [latitude]="latitude" [longitude]="longitude" [styles]="mapStyles" [zoom]="zoom"
                  (mapReady)="onMapReady($event)" style="height: 29rem;">
                </agm-map>
              </div>
            </div>
            <!-- Map Drawing end-->
          </div>
        </form>
        <!--Edit Geofence End-->
      </div>
    </div>
  </div>
</div>
<!--Page main content end-->
