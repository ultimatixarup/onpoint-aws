<div class="page-content page-content-main">
    <div class="row sideMenuItem">
      <div class="container">
        <div class="col-xs-12 content-right">
          <!-- Breadcrumb and Search Consumer or Fleet Id-->
          <div class="row">
            <div class="col-xs-12 col-lg-12">
              <span class="breadcrumb-left">
                <h1 class="login-headline heading-title">Edit Service Reminders
                </h1>
              </span>
              <span class="breadcrumb-right mr-8">
                <!-- Breadcurmb for admin-->
                <ng-container *ngIf="user === 'admin'">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                      <a routerLink="/adlp/admin/dashboardAdmin" class="breadcrumb-h6"><i
                          class="bx bx-home-circle"></i></a>
                    </li>
                    <li class="breadcrumb-item inactive-bread"><a
                        routerLink="/adlp/admin/admindashboard/maintenance">Maintenance</a></li>
                    <li class="breadcrumb-item text-selected active-bread"><a
                        routerLink="adlp/admin/admindashboard/maintenance/serviceReminder/serviceReminders"> Service
                        Reminders</a></li>
                    <li class="breadcrumb-item text-selected active-bread">Edit Service Reminders</li>
                  </ol>
                </ng-container>
                <!-- Breadcurmb for admin end-->
                <!-- Breadcurmb for TSP, Fleet Owner-->
                <ng-container *ngIf="user != 'admin'">
                  <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                      <a routerLink="/adlp/admin/admindashboard/dashboardfleet" class="breadcrumb-h6"><i
                          class="bx bx-home-circle"></i></a>
                    </li>
                    <li class="breadcrumb-item inactive-bread"><a
                        routerLink="/adlp/admin/admindashboard/dashboardfleet/fleet-maintenance">Maintenance</a></li>
                    <li class="breadcrumb-item text-selected active-bread"><a
                        routerLink="/adlp/admin/admindashboard/maintenance/serviceReminder/serviceReminders"> Service
                        Reminders</a></li>
                    <li class="breadcrumb-item text-selected active-bread">Edit Service Reminders</li>
                  </ol>
                </ng-container>
                <!-- Breadcurmb for TSP, Fleet Owner End-->
              </span>
            </div>
          </div>
          <!-- Breadcrumb and Search Consumer or Fleet Id end-->
          <!-- Main content start-->
          <div class="row mr-24">
            <div class="col-xs-12 col-lg-2">&nbsp;</div>
            <div class="col-xs-12 col-lg-8">
              <!-- Add new reminder-->
              <div class="row">
                <div class="col-xs-12 col-lg-12">
                  <div class="card">
                    <div class="card-body">
                      <div class="modal-header">
                        <div class="col-xs-12 col-lg-12">
                          <!-- Go back and heading -->
                          <div class="row">
                            <div class="col-xs-12 col-lg-12">
                              <span class="back-btn custom-tooltip-icon2"><img
                                  src="../../../../../../../../assets/images/arrow-back.svg"
                                  (click)="goBacktoMaintenance()" class="he-10"></span>
                              <span class="custom-tooltip2-goback">Go Back</span>
                              <span class="add-span">
                                <h5 class="modal-title mt-0 add-head">
                                  Edit Service Reminder
                                </h5>
                              </span>
                            </div>
                          </div>
                          <!-- Go back and heading end-->
                        </div>
                      </div>
                      <!-- Form field -->
                      <div class="modal-body modal-height  mr-24">
                        <!-- First row-->
                        <div class="row">
                          <!-- Vehicle name-->
                          <div class="col-xs-12 col-lg-4">
                            <label class="form-label label-data">
                              Vehicle Name
                            </label>
                            <!-- <ng-select [items]="vinList" bindLabel="Alias" bindValue="VIN" placeholder="Select"
                              [(ngModel)]="vehicleName" [multiple]="true" [closeOnSelect]="false" [clearable]="true"
                              class="font-common custom-ng-select">
                              <ng-template ng-option-tmp let-item="item" let-selected="selected">
                                <div class="d-flex align-items-center">
                                  <input type="checkbox" class="me-2" [checked]="selected" />
                                  {{ item.Alias }}
                                </div>
                              </ng-template>
                            </ng-select> -->
                            <input
                            type="text"
                            class="form-control"
                            [(ngModel)]="vehicleName" disabled style="height: 37px!important;"/>
                          </div>
                          <!-- Vehicle name end-->
                          <!-- Service category-->
                          <div class="col-xs-12 col-lg-4">
                            <label class="form-label label-data"> Service Category</label>
                            <ng-select
                            [items]="serviceCategory"
                            bindLabel="name"
                            bindValue="id"
                            placeholder="Service Category"
                            [(ngModel)]="selectedCategoryId"
                            [multiple]="false"
                            [clearable]="true"
                            (change)="onCategoryChange($event)"
                            class="font-common customs-ng-select">
                          </ng-select>
                            <div *ngIf="isDropdownOpen" class="text-danger">Select service category</div>
                          </div>
                          <!-- Service category End-->
                          <!-- Serive task-->
                          <div class="col-xs-12 col-lg-4">
                            <label class="form-label label-data">
                              Service Task
                            </label>
                            <ng-select
                            [items]="serviceTaskList"
                            bindLabel="name"
                            bindValue="id"
                            placeholder="Service Task"
                            [(ngModel)]="searchbyTask"
                            [multiple]="true"
                            [closeOnSelect]="false"
                            [clearable]="true"
                            class="font-common custom-ng-select">
                            <ng-template ng-option-tmp let-item="item" let-selected="selected">
                              <input type="checkbox" [checked]="selected" /> {{ item.name }}
                            </ng-template>
                          </ng-select>
                            <div *ngIf="isDropdownOpen" class="text-danger">Select service task</div>
                          </div>
                          <!-- Serive task end-->
                        </div>
                        <!-- First row end-->
                        <!-- Second row-->
                      <div class="row mr-24">
                        <!-- Time interval-->
                        <div class="col-xs-12 col-lg-6">
                          <div class="time-interval-wrapper">
                            <label class="time-interval-label">
                              Time Interval &nbsp;&nbsp;
                              <i class="fa fa-info-circle custom-tooltip-icon2"></i>
                              <span class="custom-tooltip2">Set service reminder interval (e.g., Brake fluid replacement
                                every 24 months). Leave blank to disable.</span>
                            </label>

                            <div class="time-interval-input-group">
                              <input type="text" [(ngModel)]="timeInterval" placeholder="Every" max="4"
                                (input)="validateNumber($event, 'timeInterval')" />


                              <select [(ngModel)]="timeIntervalUnit">
                                <option value="Day(s)" selected>Day(s)</option>
                                <option value="Week(s)">Week(s)</option>
                                <option value="Month(s)">Month(s)</option>
                                <option value="Year(s)">Year(s)</option>
                              </select>
                            </div>
                            <div *ngIf="invalidField === 'timeInterval'" class="text-danger">Enter only number (0–9).
                            </div>
                          </div>
                        </div>
                        <!-- Time interval end-->
                        <!-- Time interval thershold-->
                        <div class="col-xs-12 col-lg-6">
                          <div class="time-interval-wrapper">
                            <label class="time-interval-label">
                              Time Due Soon Threshold &nbsp;&nbsp;
                              <i class="fa fa-info-circle custom-tooltip-icon1"></i>
                              <span class="custom-tooltip1">Please specify the timeframe you consider a maintenance
                                reminder due soon. (e.g., 2 weeks)."></span>

                            </label>

                            <div class="time-interval-input-group">
                              <input type="text" [(ngModel)]="timeIntervalThreshold" placeholder="Every" max="4"
                                (input)="validateNumber($event, 'timeIntervalThreshold')" />
                              <select [(ngModel)]="timeIntervalThresholdUnit">
                                <option value="Day(s)" selected>Day(s)</option>
                                <option value="Week(s)">Week(s)</option>
                                <option value="Month(s)">Month(s)</option>
                                <option value="Year(s)">Year(s)</option>
                              </select>
                            </div>
                            <div *ngIf="invalidField === 'timeIntervalThreshold'" class="text-danger">
                              Enter only number (0–9).
                            </div>
                            <div *ngIf="isThresholdExceeding" class="text-danger">
                              Threshold must not exceed the time interval.
                            </div>
                          </div>
                        </div>
                        <!-- Time interval thershold end-->
                      </div>
                      <!-- Second row end-->
                        <!-- Third row -->
                        <div class="row mr-24">
                          <!-- Primary odometer-->
                          <div class="col-xs-12 col-lg-6">
                            <div class="time-interval-wrapper">
                              <label class="time-interval-label">
                                Primary Odometer Interval &nbsp;&nbsp;
                                <i class="fa fa-info-circle custom-tooltip-icon1"></i>
                                <span class="custom-tooltip1">Set service reminder based on usage (e.g., oil change every
                                  5,000 miles) can be set. Leave blank to disable. Units match primary vehicle
                                  meter.</span>
                              </label>
                              <div class="time-interval-input-group">
                                <span class="input-group-span">
                                  <input type="text" [(ngModel)]="odometerInterval" placeholder="Odometer"
                                    (input)="validateNumberOdometer($event, 'odometerInterval')" />
                                </span>
                                <span class="pad-top-8">mi</span>
                              </div>
                              <div *ngIf="invalidField === 'odometerInterval'" class="text-danger">Enter only number
                                (0–9).</div>

                            </div>
                          </div>
                          <!-- Primary odometer end-->
                          <!-- Primary odometer due soon-->
                          <div class="col-xs-12 col-lg-6">
                            <div class="time-interval-wrapper">
                              <label class="time-interval-label">
                                Primary Odometer Due Soon Threshold &nbsp;&nbsp;
                                <i class="fa fa-info-circle custom-tooltip-icon"></i>
                                <span class="custom-tooltip">Please specify preferred distance/time value (e.g., 500
                                  miles) for fleet vehicles.</span>
                              </label>

                              <div class="time-interval-input-group">
                                <span class="input-group-span">
                                  <input type="text" [(ngModel)]="odometerThreshold" placeholder="Odometer" max="4"
                                    (input)="validateNumberOdometer($event, 'odometerThreshold')" />
                                </span>
                                <span class="pad-top-8">mi</span>
                              </div>
                              <div *ngIf="invalidField === 'odometerThreshold'" class="text-danger">Enter only number
                                (0–9).</div>
                            </div>
                          </div>
                          <!-- Primary odometer due soon end-->
                        </div>
                        <!-- Third row end -->
                        <!-- fourth row-->
                        <div class="row mr-24">
                          <!-- Toggle email notificaiton on/off-->
                          <div class="col-xs-12 col-lg-12">
                            <div class="time-interval-wrapper">
                              <label class="time-interval-label">
                                <div class="onoff-toggle">
                                  <label class="switch">
                                    <input type="checkbox" [(ngModel)]="isToggled">
                                    <span class="slider"></span>
                                  </label>
                                </div>
                                &nbsp;&nbsp; <label class="form-label notification-data">Notification</label>
                              </label>
                              <div class="notification">
                                <h5>Set email alerts for Service Reminders. Notifications will be sent at 7:00 AM when
                                  reminders are Due Soon or Overdue, and weekly thereafter until resolved.</h5>
                              </div>
                            </div>
                          </div>
                          <!-- Toggle email notificaiton on/off end-->
                        </div>
                        <!-- fourth row end-->
                        <!--Fifth row-->
                        <div class="row mr-24">
                          <!-- Add email id buttom-->
                          <div class="col-xs-12 col-lg-4">
                            <a href="javascript:void(0)" class="serviceTaskLink" (click)="showEmailInput = true">
                              + Add Email Id
                            </a>
                            <!-- Input Box for New Email -->
                            <div *ngIf="showEmailInput" class="email-input-container mt-2">
                              <div class="row">
                                <div class="col-xs-12 col-lg-10">
                                  <input type="email" [(ngModel)]="newEmail" class="form-control"
                                    placeholder="Enter email address" />
                                </div>
                                <div class="col-xs-12 col-lg-2">
                                  <button (click)="addEmail()" class="btn btn-sm mt-1"><i class="fa fa-plus"></i></button>
                                </div>
                              </div>
                            </div>
                            <!-- Display Added Emails -->
                            <ul class="email-list mt-2">
                              <li *ngFor="let email of emails; let i = index">
                                {{ email }}
                                <button (click)="removeEmail(i)" class="btn btn-link text-danger btn-sm">x</button>
                              </li>
                            </ul>
                          </div>
                          <!-- Add email id end-->
                        </div>
                        <!--Fifth row end-->
                      </div>
                      <!-- Form field End -->
                    </div>
                  </div>
                </div>
              </div>
              <div class="row mar-btm-100">
                <div class="col-xs-12 col-lg-6">&nbsp;</div>
                <div class="col-xs-12 col-lg-6">
                  <div class="button-group f-ri">
                    <button class="btn btn-primary" (click)="onSubmit()">Submit</button>
                  </div>
                </div>
              </div>
              <!-- Add new reminder End-->
            </div>
          </div>
          <!-- Main content end -->
        </div>
      </div>
    </div>
  </div>
