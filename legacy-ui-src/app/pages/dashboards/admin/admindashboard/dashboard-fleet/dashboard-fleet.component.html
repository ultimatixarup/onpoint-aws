<div class="page-content page-content-main">
    <div class="row">
        <div class="col-xs-12 col-lg-2 navbar-side-menu">
            <app-sidebar></app-sidebar>
        </div>
        <div class="col-xs-12 col-lg-10 content-right">
            <div class="row">
                <div class="col-xs-12 col-lg-12">
                    <span class="breadcrumb-left">

                        <!-- <ng-container *ngIf="user !='role_user_fleet'">
                            <ng-container *ngIf="customConsumer != 'Onwardfleet'">
                                <h1 class="consumer">{{customConsumer}}</h1>
                            </ng-container>
                            <ng-container *ngIf="customConsumer === 'Onwardfleet'">
                                <h1 class="consumer">Onward Connected</h1>
                            </ng-container>
                        </ng-container> -->
                        <!-- <ng-container *ngIf="user ==='role_user_fleet'">
                            <div class="content-text">
                                <span class="vin_container">
                                    <span class="content-sub-text">Fleet Id</span>
                                </span>
                                <span class="content-sub-text2">{{ selectedFleetDisplay || fleetIdValueNew }}</span>
                            </div>
                        </ng-container> -->
                    </span>
                    <span class="breadcrumb-right bd-w">
                        <div class="row">
                            <div class="col-xs-12 col-lg-4"> &nbsp;</div>
                            <div class="col-xs-12 col-lg-4"> &nbsp;</div>
                             <div class="col-xs-12 col-lg-4" *ngIf="user !='role_user_fleet'">
                                <ng-select [searchable]="true" class="newSelect1" [clearable]="true"
                                    placeholder="Organization Id/Name" (change)="selectFleetId()" [(ngModel)]="fleetIdData">
                                    <ng-option *ngFor="let fleet of fleetList" value="{{fleet.id}}">{{fleet.id}} -
                                        [{{fleet.name}}]</ng-option>
                                </ng-select>
                            </div>
                             <!-- <div class="col-xs-12 col-lg-4">
                            <ng-select
                            [searchable]="true"
                            class="newSelect1"
                            [clearable]="true"
                            placeholder="Group Name"
                            [items]="groupList"
                            bindLabel="name"
                            bindValue="id"
                            [(ngModel)]="groupIdData"
                            (change)="onGroupIdChange($event)">

                            <ng-template ng-option-tmp let-item="item">
                              <span [ngStyle]="{ 'padding-left.px': item.level * 18 }">
                                {{ item.name }}
                              </span>
                            </ng-template>
                          </ng-select>
                          </div> -->
                            <!-- <div class="col-xs-12 col-lg-4">
                                <ng-select [searchable]="true" class="newSelect" [clearable]="true"
                                placeholder="Select Time Period" (clear)="clearMonthSelection()"
                                [(ngModel)]="monthData" (change)="onTimePeriodChange($event)">
                                <ng-option value="" disabled>Select Time Period</ng-option>
                                <ng-option value="monthly">Monthly</ng-option>
                                <ng-option value="weekly">Weekly</ng-option>
                                <ng-option value="daily">Daily</ng-option>
                            </ng-select>
                            </div> -->


                        </div>
                    </span>
                </div>


            </div>
            <div class="row">
                <div class="col-xs-12 col-lg-12" style="float: right; margin-left: -2px; margin-top: -18px;">
                    <span
                        style="float: right; font-family: 'Poppins'!important; color: #727272; font-weight:500; font-size: 12px;">{{
                        updatedDate }}</span>
                    <span style="float: right;">
                        <img src="../../../../../assets/images/update-july.svg" alt="" class="history-image"
                            (click)="updateData()" />
                    </span>

                </div>
            </div>
            <!-- Overall Vehicle Splits-->
            <div class="row">
                <div class="col-xs-12 col-lg-12">
                    <h4 class="top-heading">Dashboard</h4>
                </div>
            </div>
            <!-- Events Section -->
            <!-- üö® Events Which Need Immediate Attention -->
            <div >
                <!-- üö® Events Section -->
                <div class="row align-items-center mb-3">
                <div class="col-6">
                    <h5 class="fw-bold mb-0">Immediate Attention Required</h5>
                </div>
                <div class="col-6 text-end">
                <div class="d-inline-flex align-items-center bg-light px-3 py-2 rounded-pill shadow-sm">
                    <i class="bi bi-truck" style="color: #FA751A; font-size: 1.25rem; margin-right: 0.5rem;"></i>
                    <span class="fw-semibold text-dark">
                    Active Vehicles:
                    </span>
                    <span
                    class="ms-2 px-3 py-2 fw-bold"
                    style="color: #FA751A; background-color: rgba(250, 117, 26, 0.1); border-radius: 20px;">
                    {{ activeVehicless || 0 }}
                    </span>
                </div>
                </div>
                </div>
                <div class="row g-3">

                  <!-- Upcoming Maintenance -->
                  <div class="col-6 col-md-2_4 ">
                    <div class="card text-center event-card border-start border-2 border-warning shadow-sm">
                      <div class="card-body px-2 py-3">
                        <div class="event-icon text-warning mb-2">
                          <i class="bi bi-wrench-adjustable"></i>
                        </div>
                        <h6 class="card-title mb-1">Maintenance</h6>
                        <p class="card-text small">Oil Change</p>
                       <span class="badge bg-warning text-dark">
                        {{ immediateAttentionRequired?.vehiclesNeedingOilChange || 0 }} Vehicles
                        </span>
                      </div>
                    </div>
                  </div>

                  <!-- Active DTC -->
                  <div class="col-6 col-md-2_4">
                    <div class="card text-center event-card border-start border-2 border-danger shadow-sm">
                      <div class="card-body px-2 py-3">
                        <div class="event-icon text-danger mb-2">
                          <i class="bi bi-exclamation-octagon"></i>
                        </div>
                        <h6 class="card-title mb-1">Active DTC</h6>
                        <p class="card-text small">Immediate Attention</p>
                        <span class="badge bg-danger"> {{ immediateAttentionRequired?.dtcAlertsCount || 0 }} Vehicles</span>
                      </div>
                    </div>
                  </div>

                  <!-- Drivers Attention -->
                  <div class="col-6 col-md-2_4">
                    <div class="card text-center event-card border-start border-2 border-primary shadow-sm">
                      <div class="card-body px-2 py-3">
                        <div class="event-icon text-primary mb-2">
                          <i class="bi bi-person-exclamation"></i>
                        </div>
                        <h6 class="card-title mb-1">Safety</h6>
                        <p class="card-text small">Risky Drivers</p>
                        <span class="badge bg-primary"> {{ immediateAttentionRequired?.worstDriverVins?.length || 0 }} Drivers</span>
                      </div>
                    </div>
                  </div>

                  <!-- Active Alerts -->
                  <div class="col-6 col-md-2_4">
                    <div class="card text-center event-card border-start border-2 border-danger shadow-sm">
                      <div class="card-body px-2 py-3">
                        <div class="event-icon text-danger mb-2">
                          <i class="bi bi-bell-fill"></i>
                        </div>
                        <h6 class="card-title mb-1">Active Alerts</h6>
                        <p class="card-text small">Notifications</p>
                        <span class="badge bg-danger"> 0 Alerts</span>
                      </div>
                    </div>
                  </div>

                  <!-- Onboarding Issues -->
                  <div class="col-6 col-md-2_4">
                    <div class="card text-center event-card border-start border-2 border-info shadow-sm">
                      <div class="card-body px-2 py-3">
                        <div class="event-icon text-info mb-2">
                          <i class="bi bi-truck"></i>
                        </div>
                        <h6 class="card-title mb-1">Onboarding Issues</h6>
                        <p class="card-text small">Pending / Failed</p>
                        <span class="badge bg-info text-dark">0 Pending</span>
                      </div>
                    </div>
                  </div>

                </div>
              </div>


              <!-- üìä Previous Day Stats Section -->

                <h5 class="mb-3 fw-bold">Previous Day ‚Äì Stats</h5>
                <div class="row">

                  <!-- New Vehicles Onboarded -->
                   <div class="col-6 col-md-2_4">
                    <div class="card text-center event-card border-start border-2 border-success shadow-sm">
                        <div class="card-body px-2 py-3">
                        <div class="event-icon text-success mb-2">
                            <i class="bi bi-speedometer2"></i>
                        </div>
                        <h6 class="card-title mb-1">Distance & Engine Hours</h6>
                        <p class="card-text small">Yesterday</p>

                        <div class="d-flex justify-content-center align-items-center gap-2">
                            <span class="badge bg-primary">{{ previousDayStats?.distanceTravel ||  0 }} mi</span>
                            <span class="badge bg-warning text-dark">{{ previousDayStats?.engineHours || 0 }} hrs</span>
                        </div>
                        </div>
                    </div>
                    </div>



                  <!-- Refueling -->
                  <div class="col-6 col-md-2_4">
                    <div class="card text-center event-card border-start border-2 border-warning shadow-sm">
                      <div class="card-body px-2 py-3">
                        <div class="event-icon text-warning mb-2">
                          <i class="bi bi-fuel-pump"></i>
                        </div>
                        <h6 class="card-title mb-1">Refueling</h6>
                         <p class="card-text small">   {{ previousDayStats?.refuelEvents?.count || 0 }} Events </p>
                        <span class="badge bg-warning text-dark">    {{ previousDayStats?.refuelEvents?.totalFuelGallons || 0 }} gal</span>
                      </div>
                    </div>
                  </div>

                  <!-- MPG -->
                  <div class="col-6 col-md-2_4">
                    <div class="card text-center event-card border-start border-2 border-primary shadow-sm">
                      <div class="card-body px-2 py-3">
                        <div class="event-icon text-primary mb-2">
                          <i class="bi bi-speedometer2"></i>
                        </div>
                        <h6 class="card-title mb-1">Average MPG</h6>
                         <p class="card-text small">Yesterday</p>
                        <span class="badge bg-primary"> {{ previousDayStats?.averageMPG || 0 }} mpg
                        </span>
                      </div>
                    </div>
                  </div>

                  <!-- Over Speeding -->
                  <div class="col-6 col-md-2_4">
                    <div class="card text-center event-card border-start border-2 border-danger shadow-sm">
                      <div class="card-body px-2 py-3">
                        <div class="event-icon text-danger mb-2">
                          <i class="bi bi-lightning-charge-fill"></i>
                        </div>
                        <h6 class="card-title mb-1">Over Speeding</h6>
                        <p class="card-text small">Alerts</p>
                        <span class="badge bg-danger"> {{ previousDayStats?.overspeedingAlerts || 0 }} Alerts</span>
                      </div>
                    </div>
                  </div>

                  <!-- Collision Events -->
                  <div class="col-6 col-md-2_4">
                    <div class="card text-center event-card border-start border-2 border-dark shadow-sm">
                      <div class="card-body px-2 py-3">
                        <div class="event-icon text-dark mb-2">
                          <i class="bi bi-car-front-fill"></i>
                        </div>
                        <h6 class="card-title mb-1">Collisions</h6>
                        <p class="card-text small">Alerts</p>
                        <span class="badge bg-dark">0 Alerts</span>
                      </div>
                    </div>
                  </div>

                </div>


                <div class="row mr-top-24 align-items-center" style="margin-bottom: 20px;">
                    <!-- Left side: Heading -->
                    <div class="col-xs-12 col-lg-6">
                      <h4 class="top-heading mb-0">Basic Telemetry</h4>
                    </div>

                    <!-- Right side: Dropdown -->
                    <div class="col-xs-12 col-lg-6 d-flex justify-content-lg-end justify-content-start mt-2 mt-lg-0">
                      <div class="fleet-dropdowm" style="width: 160px;">
                        <ng-select bindLabel="label" style="font-family: 'Poppins'!important;"
                            bindValue="value" placeholder="Select Time Period" [(ngModel)]="selectedPeriod"
                            (change)="onTimePeriodChangeData($event)"
                            class="newSelect timePeriod current-month-dropdown">
                            <ng-option *ngFor="let period of timePeriods" [value]="period.value">
                                {{ period.label }}
                            </ng-option>
                        </ng-select>
                      </div>
                    </div>
                  </div>



            <div class="row mt-4">
                <div class="col-xs-12 col-lg-6" (click)="goToBasicTelemetryDashboard()" style="cursor: pointer;">
                    <div class="card shadow-sm h-100">
                      <div class="card-body">
                        <h6 class="fw-bold mb-3">Miles vs Driving Time</h6>
                        <hr class="line">
                        <div class="row">
                            <div class="col-xs-12 col-lg-7">
                                <h6 class="number-text">{{totalMilesDriven | number : '1.2-2'}}</h6>
                            </div>
                        </div>
                        <apx-chart
                        [series]="milesEngineSeries"
                        [chart]="milesEngineChart.chart"
                        [xaxis]="milesEngineChart.xaxis"
                        [yaxis]="milesEngineChart.yaxis"
                        [stroke]="milesEngineChart.stroke"
                        [dataLabels]="milesEngineChart.dataLabels"
                        [colors]="milesEngineChart.colors"
                        [tooltip]="milesEngineChart.tooltip">
                        </apx-chart>
                      </div>
                    </div>
                  </div>
                <!-- <div class="col-xs-12 col-lg-4">
                    <div class="card card-mid-trip">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-xs-12 col-lg-12">
                                    <span class="user-icon f-le">
                                        <img src="../../../../../assets/images/icon/totalmiles.svg" class="icon">
                                    </span>
                                    <span class="f-le">
                                        <h4 class="card-title card-heading mb-4">Total Miles Driven</h4>
                                    </span>
                                    <span class="f-ri">
                                        <ng-container *ngIf="last5monthconsumed">
                                            <h4 class="card-title card-heading mb-4 months-text">
                                                Last 5 Months</h4>
                                        </ng-container>
                                        <ng-container *ngIf="lastWeek">
                                            <h4 class="card-title card-heading mb-4 months-text">
                                                Last 4 Weeks</h4>
                                        </ng-container>
                                        <ng-container *ngIf="lastDays">
                                            <h4 class="card-title card-heading mb-4 months-text">
                                                Last 5 Days</h4>
                                        </ng-container>
                                    </span>
                                </div>
                            </div>
                            <hr class="line">
                            <div class="row">
                                <div class="col-xs-12 col-lg-7">
                                    <h6 class="number-text">{{milesDrivenMonthsWise | number : '1.2-2'}}</h6>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-12 col-lg-12 mr-12-left">
                                    <ngx-spinner bdColor="rgba(0,0,0,0.2)" size="medium" color="#000000"
                                        type="ball-elastic-dots" [fullScreen]="false">
                                        <div class="custom-spinner">
                                            <img src="../../../../../assets/images/spinner-3.svg" alt="Your Logo">
                                        </div>
                                        <div class="loading-text">Please wait, we are getting
                                            information...</div>
                                    </ngx-spinner>

                                    <ng-container *ngIf="!vehicleSplitDonut">
                                        <ng-container *ngIf="chartOptions10">
                                            <apx-chart [series]="chartOptions10.series" [chart]="chartOptions10.chart"
                                                [xaxis]="chartOptions10.xaxis" [dataLabels]="chartOptions10.dataLabels"
                                                [grid]="chartOptions10.grid" [stroke]="chartOptions10.stroke"
                                                [yaxis]="chartOptions10.yaxis" [fill]="chartOptions10.fill"
                                                [colors]="chartOptions10.colors"></apx-chart>
                                        </ng-container>
                                    </ng-container>
                                    <ng-container *ngIf="vehicleSplitDonut"
                                        class="d-flex justify-content-center align-items-center">
                                        <div class="text-center">
                                            <img src="../../../../assets/images/noData_donut.svg" class="mr-top-30"
                                                alt="">
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->

                  <div class="col-xs-12 col-lg-6"  (click)="goToBasicTelemetryDashboard()" style="cursor: pointer;">
                    <div class="card shadow-sm h-100">
                      <div class="card-body">
                        <h6 class="fw-bold mb-3">Top & Bottom Vehicle Utilization</h6>

                        <hr class="line">
                        <apx-chart
                            [series]="vehicleUtilizationSeriesNew"
                            [chart]="vehicleUtilizationChartNew.chart"
                            [xaxis]="vehicleUtilizationChartNew.xaxis"
                            [plotOptions]="vehicleUtilizationChartNew.plotOptions"
                            [dataLabels]="vehicleUtilizationChartNew.dataLabels"
                            [colors]="vehicleUtilizationChartNew.colors"
                            [tooltip]="vehicleUtilizationChartNew.tooltip">
                        </apx-chart>

                      </div>
                    </div>
                  </div>


                <!-- <div class="col-xs-12 col-lg-4">
                    <div class="card card-mid-trip">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-xs-12 col-lg-12">
                                    <span class="user-icon f-le">
                                        <img src="../../../../../assets/images/icon/fuel.svg" class="icon">
                                    </span>
                                    <span class="f-le">
                                        <h4 class="card-title card-heading mb-4">By Fuel</h4>
                                    </span>
                                </div>
                            </div>
                            <hr class="line">
                            <div class="row h-box">
                                <div class="col-xs-12 col-lg-12">
                                    <ng-container *ngIf="!vehicleFuelDonut">
                                        <ng-container *ngIf="chartOptionsFuel">
                                            <apx-chart [series]="chartOptionsFuel.series"
                                                [chart]="chartOptionsFuel.chart"
                                                [dataLabels]="chartOptionsFuel.dataLabels"
                                                [plotOptions]="chartOptionsFuel.plotOptions"
                                                [xaxis]="chartOptionsFuel.xaxis" [yaxis]="chartOptionsFuel.yaxis"
                                                [legend]="chartOptionsFuel.legend" [colors]="chartOptionsFuel.colors"
                                                [grid]="chartOptionsFuel.grid"></apx-chart>
                                        </ng-container>
                                    </ng-container>
                                    <ng-container *ngIf="vehicleFuelDonut"
                                        class="d-flex justify-content-center align-items-center">
                                        <div class="text-center">
                                            <img src="../../../../assets/images/noData_donut.svg" class="mr-top-30"
                                                alt="">
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                            <div class="row">
                                <ng-container *ngIf="chartOptionsFuel">
                                    <ng-container *ngFor="let label of chartOptionsFuel.labels; let i = index"
                                        class="legend-item">
                                        <div class="col-xs-12 col-lg-6">
                                            <span class="legend-color"
                                                [style.background-color]="chartOptionsFuel.colors[i]"></span>
                                            <span class="chart-label">{{ label }} ({{ chartOptionsFuel.series[0].data[i]
                                                }})</span>
                                        </div>
                                    </ng-container>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-xs-12 col-lg-4">
                    <div class="card card-mid-trip">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-xs-12 col-lg-12">
                                    <span class="user-icon f-le">
                                        <img src="../../../../../assets/images/icon/body.svg" class="icon">
                                    </span>
                                    <span class="f-le">
                                        <h4 class="card-title card-heading mb-4">By Body Class</h4>
                                    </span>
                                </div>
                            </div>
                            <hr class="line">
                            <div class="row h-box">
                                <div class="col-xs-12 col-lg-12">
                                    <ng-container *ngIf="!vehicleFuelDonut">
                                        <ng-container *ngIf="vehicleBodyClass">
                                            <apx-chart class="apex-charts" dir="ltr" [series]="vehicleBodyClass.series"
                                                [chart]="vehicleBodyClass.chart" [labels]="vehicleBodyClass.labels"
                                                [legend]="vehicleBodyClass.legend" [colors]="vehicleBodyClass.colors"
                                                [dataLabels]="vehicleBodyClass.dataLabels"
                                                [responsive]="vehicleBodyClass.responsive">
                                            </apx-chart>
                                        </ng-container>
                                    </ng-container>
                                    <ng-container *ngIf="vehicleFuelDonut"
                                        class="d-flex justify-content-center align-items-center">
                                        <div class="text-center">
                                            <img src="../../../../assets/images/noData_donut.svg" class="mr-top-30"
                                                alt="">
                                        </div>
                                    </ng-container>
                                </div>
                            </div>
                            <div class="row">
                                <ng-container *ngIf="vehicleBodyClass">
                                    <ng-container *ngFor="let label of vehicleBodyClass.labels; let i = index"
                                        class="legend-item">
                                        <div class="col-xs-12 col-lg-6">
                                            <span class="legend-color"
                                                [style.background-color]="vehicleBodyClass.colors[i]"></span>
                                            <span class="chart-label">{{ label }} ({{ vehicleBodyClass.series[i]
                                                }})</span>
                                        </div>
                                    </ng-container>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </div> -->
            </div>
            <!-- <div class="pt-2 mt-4">
                <div class="content-section">
                    <div class="flex-space-between border-bottom pb-2 inner-section">
                        <div>
                            <span class="number-text" [ngClass]="{ 'loading-background': !enrollmentVehicleStatusnew }"
                                style="line-height: 25px;">
                                {{ enrollmentVehicleStatusnew}}
                            </span>
                            <div class="sub-text">Total Enrolled Vehicles</div>
                        </div>
                        <div>
                            <div class="download-dropdown">
                                <div class="download_padding">
                                    <div>
                                        <img (click)="exportToExcel()" style="cursor: pointer;"
                                            src="../../assets/images/download_icon.svg" alt=""
                                            class="download_button" />
                                    </div>
                                </div>

                                <div class="fleet-dropdowm" style="width: 160px;">
                                    <ng-select bindLabel="label" style="font-family: 'Poppins'!important;"
                                        bindValue="value" placeholder="Select Time Period" [(ngModel)]="selectedPeriod"
                                        (change)="onTimePeriodChangeData($event)"
                                        class="newSelect  timePeriod current-month-dropdown ">
                                        <ng-option *ngFor="let period of timePeriods" [value]="period.value">
                                            {{ period.label }}
                                        </ng-option>
                                    </ng-select>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6 border-right grid-center">
                            <div #chartContainer class="chart_image_extract">
                                <div class="chart-container-left">
                                    <div class="main-container-bar">
                                        <div *ngFor="let item of chartData.vehicleEnrolledData.data; let i = index"
                                            class="progress-bar-item">
                                            <div class="flex-space-between pt-3">
                                                <div class="sub-text">{{ chartData.vehicleEnrolledData.labels[i] }}
                                                </div>
                                                <div class="main-text">{{ chartData.vehicleEnrolledData.data[i] }}</div>
                                            </div>
                                            <div class="progress-bar-container">
                                                <div class="progress-bar"
                                                    [style.width.%]="calculateWidth(chartData.vehicleEnrolledData.data[i])"
                                                    [style.backgroundColor]="chartData.vehicleEnrolledData.colors[i]">
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="pt-4">
                                <div class="flex-space-between" style="margin-top: -24px;">
                                    <div class="pt-4 padding-left-2">
                                        <div class="pt-100" style="margin-top: 8px;height: 45px;" *ngFor="let item of chartData.totalVehiclesData.categories;
                                let i = index">
                                            <div class="custom-donut-legend-text">
                                                <span class="custom-donut-legend-marker" [ngStyle]="{
                                        'background-color':
                                          chartData.totalVehiclesData.colors[i]
                                      }"></span>
                                                {{ item }}
                                            </div>
                                            <div class="custom-donut-legend-value">
                                                {{ chartData.totalVehiclesData.data[i] }}
                                            </div>
                                        </div>

                                    </div>
                                    <div class="padding-right-2 pt-4" style="margin-top:12px;">

                                        <div class="chart-container">
                                            <apx-chart #chart [series]="ChartOptions.series"
                                                [chart]="ChartOptions.chart" [labels]="ChartOptions.labels"
                                                [colors]="ChartOptions.colors" [plotOptions]="ChartOptions.plotOptions"
                                                [dataLabels]="ChartOptions.dataLabels" [legend]="ChartOptions.legend"
                                                [responsive]="ChartOptions.responsive"
                                                [stroke]="ChartOptions.stroke"></apx-chart>
                                            <div #customCircle class="custom-donut-circle"
                                                *ngIf="chartData.totalVehiclesData.shadow"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row gap-mar" style="margin-top: 12px!important;">
                                <div class="col-xs-12 col-md" *ngFor="let button of buttons">
                                    <button [ngClass]="{
                                    'btn-oem-new': oemDataAvailable(button),
                  'btn-oem-disabled': !oemDataAvailable(button),
                  'active': selectedButton === button && oemDataAvailable(button)
                                  }" [disabled]="!oemDataAvailable(button)" (click)="selectButton(button)">
                                        {{ button }}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->
            <div class="row mr-top-24" style="margin-bottom: 20px;;">
                <div class="col-xs-12 col-lg-12">
                    <span class="page-aling-l">
                        <h4 class="top-heading">Fuel Analytics</h4>
                    </span>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-xs-12 col-lg-4"  (click)="goToFuelDashboard()" style="cursor: pointer;">
                    <div class="card shadow-sm h-100">
                      <div class="card-body">
                        <h6 class="fw-bold mb-3">Fuel Consumed vs Refuel & Cost</h6>
                        <hr class="line">
                        <apx-chart
                          [series]="fuelSeriesNew"
                          [chart]="fuelChartNew.chart"
                          [xaxis]="fuelChartNew.xaxis"
                          [yaxis]="fuelChartNew.yaxis"
                          [plotOptions]="fuelChartNew.plotOptions"
                          [stroke]="fuelChartNew.stroke"
                          [dataLabels]="fuelChartNew.dataLabels"
                          [tooltip]="fuelChartNew.tooltip"
                          [colors]="fuelChartNew.colors">
                        </apx-chart>
                      </div>
                    </div>
                  </div>

                  <div class="col-xs-12 col-lg-4" (click)="goToFuelDashboard()" style="cursor: pointer;">
                    <div class="card shadow-sm h-100">
                      <div class="card-body">
                        <h6 class="fw-bold mb-3">MPG</h6>
                        <hr class="line">
                        <apx-chart
                          [series]="mpgSeries"
                          [chart]="mpgChart.chart"
                          [xaxis]="mpgChart.xaxis"
                          [yaxis]="mpgChart.yaxis"
                          [stroke]="mpgChart.stroke"
                          [dataLabels]="mpgChart.dataLabels"
                          [tooltip]="mpgChart.tooltip"
                          [markers]="mpgChart.markers"
                          [colors]="mpgChart.colors">
                        </apx-chart>
                      </div>
                    </div>
                  </div>
                  <div class="col-xs-12 col-lg-4" (click)="goToFuelDashboard()" style="cursor: pointer;">
                    <div class="card shadow-sm h-100">
                      <div class="card-body">
                        <h6 class="fw-bold mb-3">Idling Hours vs Fuel Waste & Cost</h6>
                        <hr class="line">
                        <apx-chart
                          [series]="fuelVsIdlingSeries"
                          [chart]="fuelVsIdling.chart"
                          [xaxis]="fuelVsIdling.xaxis"
                          [yaxis]="fuelVsIdling.yaxis"
                          [plotOptions]="fuelVsIdling.plotOptions"
                          [stroke]="fuelVsIdling.stroke"
                          [dataLabels]="fuelVsIdling.dataLabels"
                          [tooltip]="fuelVsIdling.tooltip"
                          [colors]="fuelVsIdling.colors">
                        </apx-chart>
                      </div>
                    </div>
                  </div>
                  <!-- <div class="col-xs-12 col-lg-4">
                    <div class="card shadow-sm h-100">
                      <div class="card-body">
                        <h6 class="fw-bold mb-3">üöõ Fuel Efficiency</h6>
                        <div class="fleet-idle">
                            <div class="total-fleet-idle">
                              <img src="../../../../../assets/images/truck-pickup.svg" alt="" />
                              <div class="description">Total Fleet Idle</div>
                              <span class="hours">
                                <span [ngClass]="{ 'loading-background': isloading2 }" style="line-height: 35px; width: 60%">
                                  406
                                </span>
                              </span>
                              <span class="hour-text">Hours</span>
                            </div>
                            <div class="arrow-section">
                              <img style="height: 50px" src="../../../../../assets/images/Group1000006202.png" alt="" />
                            </div>
                            <div class="approx-fuel-waste">
                              <img src="../../../../../assets/images/fuel-svg.svg" alt="" />
                              <div class="description">Approx Fuel Waste</div>
                              <span class="hours red">
                                <span [ngClass]="{ 'loading-background': isloading2 }" style="line-height: 35px; width: 60%">
                                  203
                                </span>
                              </span>
                              <span class="hour-text red">gal</span>
                            </div>
                          </div>

                      </div>
                    </div>
                  </div> -->



            </div>

            <!-- <div class="row" style="margin-top: 24px; margin-bottom: 24px;">
                <div class="col-xs-12 col-lg-12"> -->
                    <!-- <span class="breadcrumb-left">
                        <h1 class="login-headline heading-title">Active VINs Overview</h1>
                    </span> -->
                    <!-- <span class="breadcrumb-right bd-w">
                        <div class="row">
                            <div class="col-xs-12 col-lg-8"> &nbsp;</div>
                            <div class="col-xs-12 col-lg-4">
                                <ng-select [searchable]="true" class="newSelect" [clearable]="true"
                                    placeholder="Select Time Period" (clear)="clearMonthSelection()"
                                    [(ngModel)]="monthData" (change)="onTimePeriodChange($event)">
                                    <ng-option value="" disabled>Select Time Period</ng-option>
                                    <ng-option value="monthly">Monthly</ng-option>
                                    <ng-option value="weekly">Weekly</ng-option>
                                    <ng-option value="daily">Daily</ng-option>
                                </ng-select>
                            </div>
                        </div>
                    </span>
                </div>

            </div> -->
            <!-- Trip Summary-->
            <div class="row mr-top-24" style="margin-bottom: 20px;;">
                <div class="col-xs-12 col-lg-12">
                    <span class="page-aling-l">
                        <h4 class="top-heading">Fleet Health</h4>
                    </span>
                </div>
            </div>
            <div class="row">
                <!-- Past Maintenance -->
                <div class="col-xs-12 col-lg-6" (click)="goToServiceHistory()" style="cursor: pointer;">
                  <div class="card shadow-sm h-100">
                    <div class="card-body">
                      <h6 class="fw-bold mb-3">üõ†Ô∏è Past Maintenance</h6>
                      <hr class="line">
                      <apx-chart
                        [series]="fleetHealthPastSeries"
                        [chart]="fleetHealthPastChart.chart"
                        [xaxis]="fleetHealthPastChart.xaxis"
                        [plotOptions]="fleetHealthPastChart.plotOptions"
                        [dataLabels]="fleetHealthPastChart.dataLabels"
                        [colors]="fleetHealthPastChart.colors"
                        [legend]="fleetHealthPastChart.legend"
                        [yaxis]="fleetHealthPastChart.yaxis"
                        [grid]="fleetHealthPastChart.grid">
                      </apx-chart>
                    </div>
                  </div>
                </div>

                <!-- Future Maintenance -->
                <div class="col-xs-12 col-lg-6"  (click)="goToUpcomingMaintenanceDashboard()" style="cursor: pointer;">
                  <div class="card shadow-sm h-100">
                    <div class="card-body">
                      <h6 class="fw-bold mb-3">üõ†Ô∏è Future Maintenance</h6>
                      <hr class="line">
                      <apx-chart
                        [series]="fleetHealthFutureSeries"
                        [chart]="fleetHealthFutureChart.chart"
                        [xaxis]="fleetHealthFutureChart.xaxis"
                        [plotOptions]="fleetHealthFutureChart.plotOptions"
                        [dataLabels]="fleetHealthFutureChart.dataLabels"
                        [colors]="fleetHealthFutureChart.colors"
                        [legend]="fleetHealthFutureChart.legend"
                        [yaxis]="fleetHealthFutureChart.yaxis"
                        [grid]="fleetHealthFutureChart.grid">
                      </apx-chart>
                    </div>
                  </div>
                </div>
              </div>


             <div class="row mr-top-24" style="margin-bottom: 20px;;">
                <div class="col-xs-12 col-lg-12">
                    <span class="page-aling-l">
                        <h4 class="top-heading">Driver Safety and Efficiency</h4>
                    </span>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-lg-4"  (click)="goToSafetyDashboard()" style="cursor: pointer;">
                    <div class="card card-mid-trip">
                      <div class="card-body">
                        <h6 class="fw-bold mb-3">‚ö†Ô∏è Safety Event </h6>
                        <hr class="line">
                        <apx-chart
                        [series]="driverSafetySeries"
                        [chart]="driverSafetyChart.chart"
                        [xaxis]="driverSafetyChart.xaxis"
                        [plotOptions]="driverSafetyChart.plotOptions"
                        [legend]="driverSafetyChart.legend"
                        [dataLabels]="driverSafetyChart.dataLabels"
                        [colors]="driverSafetyChart.colors"
                        [tooltip]="driverSafetyChart.tooltip">
                        </apx-chart>



                      </div>
                    </div>
                  </div>
                <div class="col-xs-12 col-lg-4" (click)="goToSafetyDashboard()" style="cursor: pointer;">
                    <div class="card card-mid-trip">
                      <div class="card-body">
                        <h6 class="fw-bold mb-3">‚ö†Ô∏è Drivers Need Attention</h6>
                        <hr class="line">
                        <apx-chart
                        [series]="worstDriversSeriesNew"
                        [chart]="worstDriversChartNew.chart"
                        [xaxis]="worstDriversChartNew.xaxis"
                        [plotOptions]="worstDriversChartNew.plotOptions"
                        [dataLabels]="worstDriversChartNew.dataLabels"
                        [colors]="worstDriversChartNew.colors"
                        [legend]="worstDriversChartNew.legend"
                        [yaxis]="worstDriversChartNew.yaxis"
                        [grid]="worstDriversChartNew.grid"
                        [tooltip]="worstDriversChartNew.tooltip">
                      </apx-chart>
                      </div>
                    </div>
                  </div>

                  <div class="col-xs-12 col-lg-4" (click)="goToSafetyDashboard()" style="cursor: pointer;">
                    <div class="card card-mid-trip">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-xs-12 col-lg-12">
                                    <span class="user-icon f-le">
                                        <img src="../../../../../assets/images/icon/driver.svg" class="icon">
                                    </span>
                                    <span class="f-le">
                                        <h4 class="card-title card-heading mb-4">Driver Safety Scorecard</h4>
                                    </span>
                                </div>
                            </div>
                            <hr class="line">
                            <div class="row h-box">
                                <div class="col-xs-12 col-lg-12">
                                    <ngx-spinner bdColor="rgba(0,0,0,0.2)" size="medium" color="#000000"
                                        type="ball-elastic-dots" [fullScreen]="false">
                                        <div class="custom-spinner">
                                            <img src="../../../../../assets/images/spinner-3.svg" alt="Your Logo">
                                        </div>
                                        <div class="loading-text">Please wait, we are getting
                                            information...</div>
                                    </ngx-spinner>
                                    <ng-container *ngIf="!vehicleSplitDonut">
                                        <ng-container *ngIf="donutchart2">
                                            <div class="chart-container">
                                                <apx-chart class="apex-charts" dir="ltr" [series]="donutchart2.series"
                                                    [chart]="donutchart2.chart" [labels]="donutchart2.labels"
                                                    [legend]="donutchart2.legend" [colors]="donutchart2.colors"
                                                    [dataLabels]="donutchart2.dataLabels"
                                                    [responsive]="donutchart2.responsive" [stroke]="donutchart2.stroke">
                                                </apx-chart>

                                                <div class="center-circle">
                                                    <div class="center-circle-1">


                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </ng-container>
                                    <ng-container *ngIf="vehicleSplitDonut"
                                        class="d-flex justify-content-center align-items-center">
                                        <div class="text-center">
                                            <img src="../../../../assets/images/noData_donut.svg" class="mr-top-30"
                                                alt="">
                                        </div>
                                    </ng-container>
                                </div>

                            </div>
                            <div class="row mr-15" style="margin-top: 0px!important;">
                                <ng-container *ngIf="donutchart2">
                                    <ng-container *ngFor="let label of donutchart2.labels; let i = index"
                                        class="legend-item">
                                        <div class="col-xs-12 col-lg-4">
                                            <span class="legend-color"
                                                [style.background-color]="donutchart2.colors[i]"></span>
                                            <span class="chart-label">{{ label }}</span>
                                        </div>
                                    </ng-container>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- <div class="col-xs-12 col-lg-4">
                    <div class="card card-mid-trip">
                        <div class="card-body">
                            <div class="row">
                                <div class="col-xs-12 col-lg-12">
                                    <span class="user-icon f-le">
                                        <img src="../../../../../assets/images/icon/aggresive.svg" class="icon">
                                    </span>
                                    <span class="f-le">
                                        <h4 class="card-title card-heading mb-4">Driver Efficiency Scorecard</h4>
                                    </span>
                                </div>
                            </div>
                            <hr class="line">
                            <div class="row h-box">
                                <div class="col-xs-12 col-lg-12">
                                    <ngx-spinner bdColor="rgba(0,0,0,0.2)" size="medium" color="#000000"
                                        type="ball-elastic-dots" [fullScreen]="false">
                                        <div class="custom-spinner">
                                            <img src="../../../../../assets/images/spinner-3.svg" alt="Your Logo">
                                        </div>
                                        <div class="loading-text">Please wait, we are getting
                                            information...</div>
                                    </ngx-spinner>
                                    <ng-container *ngIf="!vehicleSplitDonut">
                                        <ng-container *ngIf="donutchart2">
                                            <div class="chart-container">
                                                <apx-chart class="apex-charts" dir="ltr" [series]="donutchart2.series"
                                                    [chart]="donutchart2.chart" [labels]="donutchart2.labels"
                                                    [legend]="donutchart2.legend" [colors]="donutchart2.colors"
                                                    [dataLabels]="donutchart2.dataLabels"
                                                    [responsive]="donutchart2.responsive" [stroke]="donutchart2.stroke">
                                                </apx-chart>

                                                <div class="center-circle">
                                                    <div class="center-circle-1">


                                                    </div>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </ng-container>
                                    <ng-container *ngIf="vehicleSplitDonut"
                                        class="d-flex justify-content-center align-items-center">
                                        <div class="text-center">
                                            <img src="../../../../assets/images/noData_donut.svg" class="mr-top-30"
                                                alt="">
                                        </div>
                                    </ng-container>
                                </div>

                            </div>
                            <div class="row mr-15" style="margin-top: 0px!important;">
                                <ng-container *ngIf="donutchart2">
                                    <ng-container *ngFor="let label of donutchart2.labels; let i = index"
                                        class="legend-item">
                                        <div class="col-xs-12 col-lg-4">
                                            <span class="legend-color"
                                                [style.background-color]="donutchart2.colors[i]"></span>
                                            <span class="chart-label">{{ label }}</span>
                                        </div>
                                    </ng-container>
                                </ng-container>
                            </div>
                        </div>
                    </div>
                </div> -->




            </div>

</div>
