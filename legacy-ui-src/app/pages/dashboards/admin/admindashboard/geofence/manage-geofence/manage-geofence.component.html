<!--Page main content-->
<div class="page-content page-content-main">
  <div class="row sideMenuItem">
    <div class="container">
    <div class="col-xs-12 content-right">
      <div class="row">
        <div class="col-xs-12 col-lg-12">
          <span class="breadcrumb-left">
            <h1 class="login-headline heading-title">Run Geofence </h1>
          </span>
          <span class="breadcrumb-right mr-8">
            <ol class="breadcrumb">
              <ng-container *ngIf="user =='admin'">
                <li class="breadcrumb-item">
                  <a routerLink="/adlp/admin" class="breadcrumb-h6"><i class="bx bx-home-circle"></i></a>
                </li>
                <li class="breadcrumb-item inactive-bread"><a routerLink="/adlp/admin/dashboardAdmin">Dashboard</a></li>
                <li class="breadcrumb-item text-selected active-bread">Run Geofence</li>
              </ng-container>
              <ng-container *ngIf="user !='admin'">
                <li class="breadcrumb-item">
                  <a routerLink="/adlp/admin/admindashboard/dashboardfleet" class="breadcrumb-h6"><i
                      class="bx bx-home-circle"></i></a>
                </li>
                <li class="breadcrumb-item inactive-bread"><a
                    routerLink="/adlp/admin/admindashboard/dashboardfleet">Dashboard</a></li>
                <li class="breadcrumb-item text-selected active-bread">Run Geofence</li>
              </ng-container>
            </ol>
          </span>
        </div>
      </div>
      <!-- Heading and Breadcrumb End-->
      <!-- Consumer and Fleet Id Filter -->
      <div class="row consumer-pad">
        <div class="col-xs-12 col-lg-2">
          <ng-container *ngIf="this.user === 'admin'">
            <app-common-consumer (consumerChange)="selectConsumer($event)"></app-common-consumer>
          </ng-container>
        </div>
        <div class="col-xs-12 col-lg-8">&nbsp;</div>
        <!-- <div class="col-xs-12 col-lg-2">
          <div class="add-button" tooltip="Add Geofence" (click)="navigateToGeofence()"><b>+</b> Add Geofence</div>
        </div> -->
        <div class="col-xs-12 col-lg-2 mr-6">
          <ng-select [searchable]="true" class="newSelect1" [clearable]="true" placeholder="Organization Id/Name"
            [(ngModel)]="fleetIdData" (ngModelChange)="onFleetIdChange()">
            <ng-option *ngFor="let fleet of fleetList" value="{{ fleet.id }}">{{ fleet.id }} - [{{ fleet.name
              }}]</ng-option>
          </ng-select>
        </div>
        <div class="col-xs-12 col-lg-2" style="margin-top: 6px;">
          <!-- <ng-select
          [searchable]="true"
          class="newSelect1"
          [clearable]="true"
          placeholder="Group Name"
          [items]="groupList"
          bindLabel="name"
          bindValue="id"
          [(ngModel)]="groupIdData"
          (change)="onGroupIdChange($event)">

          <ng-template ng-option-tmp let-item="item">
            <span [ngStyle]="{ 'padding-left.px': item.level * 18 }">
              {{ item.name }}
            </span>
          </ng-template>
        </ng-select> -->
        </div>
      </div>
      <!-- Consumer and Fleet Id Filter -->
      <!-- main container start -->
      <!-- Search, location type and time period filter-->
       <div style="height: 350px;">
      <div class="row mr-12" >
        <div class="col-xs-12 col-lg-12">
          <div class="row">
            <div class="col-xs-12 col-lg-4">
              <ng-select [searchable]="true" class="newSelect" [multiple]="true" placeholder="Geofence Name"
              [(ngModel)]="selectedTypes" (change)="onTypeChange()" [disabled]="!fleetIdData" [autoClose]="false">
     <ng-option *ngFor="let type of filteredGeofenceData" [value]="type.id">{{ type.name }}</ng-option>
   </ng-select>
            </div>
            <div class="col-xs-12 col-lg-3">
              <ng-select bindLabel="label" [clearable]="true"
                bindValue="value" placeholder="Time Period" (change)="onTimePeriodChangeData($event)"
                [(ngModel)]="selectedPeriod" class="newSelect font-common">
                <ng-option *ngFor="let period of timePeriods" [value]="period.value"> {{ period.label }} </ng-option>
              </ng-select>
            </div>
            <div class="col-xs-12 col-lg-2">
              <div class="blue-button" (click)="callApiWithSelectedData(); navigateToGeofenceReport('')"
               [ngClass]="{'disabled-button': !isButtonEnabled()}"
                [attr.disabled]="!isButtonEnabled() ? true : null">
                Apply
              </div>
            </div>
           <div class="col-xs-12 col-lg-1">
              <img src="../../../../../../../assets/images/download-report-icon.svg"  (click)="downloadFilteredGeofenceData()" alt="" ngbTooltip="Geofence Report" class="download-report-icon" />
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
  </div>
</div>
</div>
