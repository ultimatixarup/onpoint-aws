<!--Spinner for full page-->
<ngx-spinner bdColor="rgba(0,0,0,0.8)" size="large" color="#fff" type="ball-elastic-dots" [fullScreen]="true">
  <div class="custom-spinner">
    <img src="../../../../../assets/images/spinner3.svg" alt="Your Logo">
  </div>
  <div class="loading-text">Please wait, we are getting information...</div>
</ngx-spinner>
<!--Spinner for full page end-->
<!--Main content-->
<div class="page-content page-content-main">
  <!-- Left side heading and right side Breadcrumb-->
  <div class="row">
    <div class="col-xs-12 col-lg-12">
      <span class="breadcrumb-left">
        <h1 class="login-headline heading-title">VIN
          <span class="heading-title-small">Trip History</span>
        </h1>
      </span>
      <span class="breadcrumb-right mr-8">
        <ol class="breadcrumb">
          <ng-container *ngIf="user == 'admin'">
            <li class="breadcrumb-item">
              <a routerLink="/adlp/admin/dashboardAdmin" class="breadcrumb-h6"><i class="bx bx-home-circle"></i></a>
            </li>
            <li class="breadcrumb-item inactive-bread"><a routerLink="/adlp/admin/dashboardAdmin">Dashboard</a></li>
            <li class="breadcrumb-item inactive-bread"><a href="javascript:void()"
                routerLink="/adlp/admin/manageVehicle">Fleet
                Summary</a></li>
          </ng-container>
          <ng-container *ngIf="user == 'role_consumer_fleet' || user == 'role_user_fleet'">
            <li class="breadcrumb-item">
              <a routerLink="/adlp/admin/admindashboard/dashboardfleet" class="breadcrumb-h6"><i
                  class="bx bx-home-circle"></i></a>
            </li>
            <li class="breadcrumb-item inactive-bread"><a
                routerLink="/adlp/admin/admindashboard/dashboardfleet">Dashboard</a></li>
            <li class="breadcrumb-item inactive-bread"><a href="javascript:void()" (click)="backManageVehicle()">Fleet
                Summary</a></li>
          </ng-container>

          <li class="breadcrumb-item text-selected active-bread">VIN Trip History</li>
        </ol>
      </span>
    </div>
  </div>
  <!-- Left side heading and right side Breadcrumb end-->
  <!--Main Content Start-->
  <div class="row mr-12">
    <div class="col-xs-12 col-lg-12">
      <div class="card">
        <div class="card-body">
          <!-- Box for Vehicle Information-->
          <div class="row">
            <div class="col-xs-12 col-lg-3">
              <div class="vin-container">
                <span class="vin-icon">Vehicle Name</span>
                <span class="vin-details"> {{eligibilityData?.alias}}</span>
              </div>
            </div>
            <div class="col-xs-12 col-lg-3">
              <div class="vin-container" style="float: left;">
                <span class="vin-icon">Driver Name</span>
                <span class="vin-details">
                  <ng-container *ngIf="eligibilityData?.driverName === 'null null'"> -- </ng-container>
                  <ng-container *ngIf="eligibilityData?.driverName != 'null null'">  {{eligibilityData?.driverName}} </ng-container>
                 </span>
              </div>
            </div>
            <!-- <div class="col-lg-6 filter-label-icon" *ngIf="user == 'admin'">

              <a class="float-right" style="float: right;">
                <img src="/assets/images/camera-disabled.svg"  ngbTooltip="View Recorded Events" class="dongle cm-img cs-tooltip" height="30">
              </a>

          </div> -->
          </div>
          <div class="row">
            <div class="col-xs-12 col-md">
              <div class="box5">
                <span class="data-lead-heading">
                  <h5 class="center-heading-data heading-box">Vehicle</h5>
                </span>
                <span class="data-lead">
                  <h4 class="heading-box-data vehicle-type"><a class="heading-main-page">
                    <ng-container *ngIf="eligibilityData?.vehicleType == null || eligibilityData?.vehicleType == '' || eligibilityData?.vehicleType === -1"> NA </ng-container>
                    <ng-container *ngIf="eligibilityData?.vehicleType != null || eligibilityData?.vehicleType != '' || eligibilityData?.vehicleType != -1">
                    <ng-container *ngIf="eligibilityData?.vehicleType == 'MULTIPURPOSE PASSENGER VEHICLE (MPV)'">MPV</ng-container>
                    <ng-container *ngIf="eligibilityData?.vehicleType == 'INCOMPLETE VEHICLE'">INCOMPLETE</ng-container>
                    <ng-container *ngIf="eligibilityData?.vehicleType != 'MULTIPURPOSE PASSENGER VEHICLE (MPV)' && eligibilityData?.vehicleType != 'INCOMPLETE VEHICLE'">{{eligibilityData?.vehicleType}} </ng-container>
                    </ng-container>
                  </a>
                  </h4>
                </span>
              </div>
            </div>
            <div class="col-xs-12 col-md">
              <div class="box5">
                <span class="data-lead-heading">
                  <h5 class="center-heading-data heading-box">Make</h5>
                </span>
                <span class="data-lead">
                  <h4 class="heading-box-data"><a class="heading-main-page">
                    <ng-container *ngIf="eligibilityData?.make == null || eligibilityData?.make == '' || eligibilityData?.make === -1"> NA </ng-container>
                    <ng-container *ngIf="eligibilityData?.make != null || eligibilityData?.make != '' || eligibilityData?.make != -1">{{eligibilityData?.make}} </ng-container></a></h4>
               </span>
              </div>
            </div>
            <div class="col-xs-12 col-md">
              <div class="box5">
                <span class="data-lead-heading">
                  <h5 class="center-heading-data heading-box">Model</h5>
                </span>
                <span class="data-lead">
                  <h4 class="heading-box-data"><a class="heading-main-page">
                    <ng-container *ngIf="eligibilityData?.model == null || eligibilityData?.model == '' || eligibilityData?.model === -1"> NA </ng-container>
                    <ng-container *ngIf="eligibilityData?.model != null || eligibilityData?.model != '' || eligibilityData?.model != -1">
                      {{eligibilityData?.model?.split(' ')[0]}}<br>{{eligibilityData?.model?.split(' ')[1]}}
                      </ng-container>
                    </a></h4>
                </span>
              </div>
            </div>
            <div class="col-xs-12 col-md">
              <div class="box5">
                <span class="data-lead-heading">
                  <h5 class="center-heading-data heading-box">Year</h5>
                </span>
                <span class="data-lead">
                  <h4 class="heading-box-data">

                    <a class="heading-main-page">
                      <ng-container *ngIf="eligibilityData?.year == null || eligibilityData?.year == '' || eligibilityData?.year === -1"> NA </ng-container>
                      <ng-container *ngIf="eligibilityData?.year != null || eligibilityData?.year != '' || eligibilityData?.year != -1">{{eligibilityData?.year}}</ng-container></a></h4>
                </span>
              </div>
            </div>
            <div class="col-xs-12 col-md">
              <div class="box5">
                <span class="data-lead-heading">
                  <h5 class="center-heading-data heading-box">Total Trips</h5>
                </span>
                <span class="data-lead">
                  <h4 class="heading-box-data"><a class="heading-main-page">{{totalTrips}}</a></h4>
                </span>
              </div>
            </div>
            <!-- <div class="col-xs-12 col-md">
              <div class="box5">
                <span class="data-lead-heading">
                  <h5 class="center-heading-data heading-box">Warranty <br>Status</h5>
                </span>
                <span class="data-lead mr-38">
                  <h4 class="heading-box-data"><a class="active-color">Active</a></h4>
                </span>
              </div>
            </div> -->
          </div>
          <!-- Box for Vehicle Information-->
          <!-- Heading and date based download-->
          <div class="row" style="margin-top: 24px; margin-bottom: 24px;">
            <div class="col-xs-12 col-lg-12">
              <span class="f-le">
                <h4 class="top-heading">TRIP SUMMARY</h4>
              </span>
              <span class="trip-summary-row">
                <div class="row">
                  <div class="col-xs-12 col-lg-1">&nbsp;</div>
                  <div class="col-xs-12 col-lg-5">
                    <div class="input-group">
                      <label for="fromDate" class="trip-summary-date-label" style="margin-top: 8px;">From Date</label>
                      <input class="form-control input-box" placeholder="mm/dd/yyyy" name="fromDate" #c2="ngModel"
                        ngbDatepicker #d2="ngbDatepicker" (click)="d2.toggle()" id="fromDate" [(ngModel)]="fromDate" />
                      <button class="btn btn-outline-calander calendar" (click)="d2.toggle()" type="button">
                        <i class="fa fa-calendar" aria-hidden="true" style="color:#5a5958"></i>
                      </button>
                    </div>
                  </div>
                  <div class="col-xs-12 col-lg-5">
                    <div class="input-group">
                      <label for="toDate" class="trip-summary-date-label" style="padding-top: 8px;">To Date</label>
                      <input class="form-control input-box" placeholder="mm/dd/yyyy" name="toDate" #c3="ngModel"
                        ngbDatepicker #d3="ngbDatepicker" (click)="d3.toggle()" id="toDate" [(ngModel)]="toDate" />
                      <button class="btn btn-outline-calander calendar" (click)="d3.toggle()" type="button">
                        <i class="fa fa-calendar" aria-hidden="true" style="color:#5a5958"></i>
                      </button>
                    </div>
                  </div>
                  <div class="col-xs-12 col-lg-1 box-data">
                    <a href="javascript:void(0)" (click)="downloadExcel()" title="Download Trip Summary">
                      <img src="../../assets/images/download_icon.svg" alt="" class="download_button" />
                    </a>&nbsp;&nbsp;
                  </div>
                </div>
              </span>
            </div>
          </div>
          <!-- Heading and date based download end-->
          <!--Trip Summary Section Start-->
          <div class="trip-details-container" style="height: 100%;">
            <!-- No data message -->
            <div *ngIf="getData.length === 0" style="height: 200px;">
              <div class="row" style="margin-top: 45px;">
                <div class="col-xs-12 col-lg-5"> &nbsp;</div>
                <div class="col-xs-12 col-lg-2 data-not">
                  <h5>
                    <img src="../../../../../assets/images/info-icon.svg" class="img-data2">
                    <h5 class="heading-show">{{ noDataMessage }}</h5>
                  </h5>
                </div>
                <div class="col-xs-12 col-lg-5"> &nbsp;</div>
              </div>
            </div>
            <!-- No data message end-->
            <!-- Data in table-->
            <div *ngIf="getData.length > 0">
              <table class="table table-bordered">
                <tbody>
                  <!-- Start Date, Total Trips and Total Miles expand-->
                  <ng-container *ngFor="let months of getData; let i = index">
                    <!-- Expand Row-->
                    <tr  class="trip-summary-toggle-section" >
                      <td class="trip-summary-toggle-section-row">
                        <div class="month">{{ formatYearMonth(months.yearMonth) }}</div>
                      </td>
                      <td colspan="3" class="trip-summary-toggle-section-row-column">
                        <div class="trip-details">
                          <span class="brand green trip-summary-toggle-section-row-column-heading">{{ months.tripCount
                            }}
                            <ng-container *ngIf="months.tripCount >= '2'">Trips</ng-container>
                            <ng-container *ngIf="months.tripCount == '1'">Trip</ng-container></span>
                          <span
                            class="brand blue trip-summary-toggle-section-row-column-heading">{{ months.miles | number:'1.2-2'}}
                            miles</span>
                            <span>
                              <div
                                class="brand-alerts red trip-summary-toggle-section-row-column-heading"
                                (click)="toggleCard(i)">
                                Events
                                <span class="dropdown-arrow" [class.open]="getData[i]?.isDropdownOpen"></span>
                              </div>
                              <div
                                class="dropdown-options"
                                *ngIf="getData[i]?.isDropdownOpen">
                                <div class="dropdown-option">
                                  <span class="consumer-name">Harsh Acceleration (count)</span>
                                  <span class="consumer-icon">{{ getData[i]?.cxRapidAccelerationCount }}</span>
                                </div>
                                <div class="dropdown-option">
                                  <span class="consumer-name">Harsh Braking (count)</span>
                                  <span class="consumer-icon">{{ getData[i]?.cxHarshBrakingCount }}</span>
                                </div>
                                <div class="dropdown-option">
                                  <span class="consumer-name">Harsh Cornering (count)</span>
                                  <span class="consumer-icon">{{ getData[i]?.cxHarshCorneringCount }}</span>
                                </div>
                                <div class="dropdown-option">
                                  <span class="consumer-name">Over Speeding (miles)</span>
                                  <span class="consumer-icon">{{ getData[i]?.cxOverspeeding75Distance | number:'1.2-2'}}</span>
                                </div>
                                <div class="dropdown-option">
                                  <span class="consumer-name">Night Driving (miles)</span>
                                  <span class="consumer-icon">{{ getData[i]?.nightDistance | number:'1.2-2' }}</span>
                                </div>
                              </div>
                            </span>
                        </div>
                      </td>
                      <td (click)="toggleExpands(i);">
                        <i class="fas fa-chevron-down"
                        [style.transform]="expandedRow1Index === i ? 'rotate(180deg)' : 'rotate(0deg)'"
                        style="transition: transform 0.3s ease;">
                     </i>
                      </td>

                    </tr>
                    <!-- Expand Row end-->
                    <!--Expand row data -->
                    <tr *ngIf="expandedRow1Index === i">
                      <td colspan="6">
                        <!--Trip details table-->
                        <table class="table table-bordered">
                          <thead>
                            <tr>
                              <ng-container *ngIf="customConsumer != 'EcoTrack'">
                             <th>Date</th>
                              <th>Trip Id</th>
                            </ng-container>
                              <th>Start Time</th>
                              <th>End Time</th>
                              <th>Trip Duration</th>
                            </tr>
                          </thead>
                          <tbody>
                            <ng-container *ngFor="let trips of months?.tripList.sort(sortTripsByDate); let i = index">
                              <tr class="bor-none">
                                <ng-container *ngIf="customConsumer != 'EcoTrack'">
                                <td> {{ trips.formattedStartTimeNew || (trips?.startTimeStamp | date: 'MMM d, y') }}</td>
                                <td>{{trips.tripId}}</td>
                                 </ng-container>
                                <!-- Time conversion for admin and other customer end-->
                               <td> {{ trips.formattedStartTime || (trips?.startTimeStamp | date: 'MMM d, y, HH:mm') }}</td>
                                  <td>{{ trips.formattedEndTime || (trips?.endTimeStamp | date: 'MMM d, y, HH:mm') }}</td>
                                  <td>{{ getTimeDifference(trips.startTimeStamp, trips.endTimeStamp) }}</td>
                                  <td class="trip-summary-toggle-section-row"><a href="javascript:void()"
                                    class="tripIdnewplus"
                                    (click)="toggleExpand(i); getTripHistoryDetails(selectedVin, trips.cxVehicleOem.toUpperCase(), trips.tripId, trips.startTimeStamp, trips.endTimeStamp)">
                                    <i class="fas fa-plus tripIdnew"></i> </a>
                                  &nbsp;&nbsp; &nbsp;&nbsp; </td>
                              </tr>
                              <!-- Trip Details after expand row-->
                              <tr *ngIf="expandedRowIndex === i">

                                <td colspan="6">
                                  <div class="row">
                                    <!-- Trip details like fuel consumed, address, odomerter and more-->
                                    <div class="col-md-6">
                                      <div class="row">
                                        <div class="col-xs-12 col-lg-12">
                                          <div class="card">
                                            <div class="card-body"
                                              style="background-color: #F2F2F2; height: 150px; border:1px solid #CCE3D8; border-radius: 10px; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);">
                                              <div class="row">
                                                <div class="col-xs-12 col-lg-1">
                                                  <img
                                                    src="../../../../../../../../assets/images/locaiton-icon-green.png"
                                                    class="green-img"><br>
                                                    <img src="../../../../../../../../assets/images/horizontal-line.svg"
                                                      class="hori-img">
                                                </div>
                                                <div class="col-xs-12 col-lg-9">
                                                  <h5 class="address">
                                                    {{tripDataNew?.startAddress}}</h5>
                                                </div>
                                                <div class="col-xs-12 col-lg-2" style="float: right;">
                                                  {{ trips.formattedTimeStart || (trips?.startTimeStamp | date: 'HH:mm') }}
                                               </div>
                                              </div>
                                              <div class="row">
                                                <div class="col-xs-12 col-lg-1">
                                                  <img
                                                    src="../../../../../../../../assets/images/locaiton-icon-ember.png"
                                                    class="green-img">
                                                </div>
                                                <div class="col-xs-12 col-lg-9">
                                                  <h5 class="address">
                                                    {{tripDataNew?.endAddress}}</h5>
                                                </div>
                                                <div class="col-xs-12 col-lg-2" style="float: right;">
                                                  {{ trips.formattedTimeEnd || (trips?.endTimeStamp | date: 'HH:mm') }}
                                                </div>
                                              </div>

                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <ng-container
                                        *ngIf="tripDataNew?.vehicleType === 'Gasoline' || tripDataNew?.vehicleType === 'Diesel' || tripDataNew?.vehicleType === 'Flexible Fuel Vehicle (FFV)'">
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/speed-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Average Speed</h5>
                                                <h5 class="data-params"> {{(tripDataNew?.cxAvgVehicleSpeed) |
                                                  number:'1.2-2'}} mph</h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/odometer-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Odometer</h5>
                                                <h5 class="data-params">{{tripDataNew?.endOdometer | number:'1.2-2'}}
                                                  miles</h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/mileage-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Mileage</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.mileage <= -1">
                                                    0.00 mpg
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.mileage == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.mileage > -1">
                                                    {{tripDataNew?.mileage | number:'1.2-2'}} mpg</ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/fuelconsumed-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Fuel Consumed</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="fuelConsumed <= -1">
                                                    0.00 gal
                                                  </ng-container>
                                                  <ng-container *ngIf="fuelConsumed == null ">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="fuelConsumed > -1">
                                                    {{fuelConsumed | number:'1.2-2'}}
                                                    <ng-container *ngIf="tripDataNew?.fuelIndicator === 'percentage'">%</ng-container>
                                                    <ng-container *ngIf="tripDataNew?.fuelIndicator === 'absolute'">gal</ng-container></ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/fuel-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Fuel Level</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.fuelLevel <= -1">
                                                    0.00 gal
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.fuelLevel === null || tripDataNew?.fuelLevel === 'NaN'">
                                                    --
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.fuelLevel > -1">
                                                    {{tripDataNew?.fuelLevel | number:'1.2-2'}}
                                                    <ng-container *ngIf="tripDataNew?.fuelIndicator === 'percentage'">%</ng-container>
                                                    <ng-container *ngIf="tripDataNew?.fuelIndicator === 'absolute'">gal</ng-container>
                                                    </ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/battery-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Battery Level</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.cxEvLevel <= -1">
                                                    13.5 V
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.cxEvLevel == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.cxEvLevel > -1">
                                                    {{tripDataNew?.cxEvLevel | number: '1.2-2'}} V</ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/tripdistance-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Trip Distance</h5>
                                                <h5 class="data-params"> {{distance | number:'1.2-2'}} miles</h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/tripduration-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Trip Duration</h5>
                                                <h5 class="data-params">  {{ formatDuration(tripDataNew?.cxDuration) }}</h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/tripduration-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Idling Duration</h5>
                                                <h5 class="data-params">{{formatDuration(tripDataNew?.cxIdlingDuration)}}</h5>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/top-speed.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Top Speed</h5>

                                                <h5 class="data-params">
                                                  <ng-container
                                                    *ngIf="tripDataNew?.maxSpeed <= -1 || tripDataNew?.maxSpeed == null">
                                                    -- mph
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.maxSpeed > -1">
                                                    {{ tripDataNew?.maxSpeed | number: '1.2-2' }} mph
                                                  </ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/driver-score-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Driver Score</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.cxDriverBehaviourScore <= -1">
                                                    0
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.cxDriverBehaviourScore == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.cxDriverBehaviourScore > -1">
                                                    {{tripDataNew?.cxDriverBehaviourScore}} </ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/vehicle-status.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Vehicle Status</h5>
                                                <h5 class="data-params">Good</h5>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </ng-container>
                                      <ng-container
                                      *ngIf="tripDataNew?.vehicleType === null || tripDataNew?.vehicleType === ''">
                                      <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                        <div class="col-xs-12 col-lg-4">
                                          <div class="row">
                                            <div class="col-xs-12 col-lg-2">
                                              <img src="../../../../../../../../assets/images/speed-icons.svg"
                                                class="image-icon">
                                            </div>
                                            <div class="col-xs-12 col-lg-8">
                                              <h5 class="heading-params">Average Speed</h5>
                                              <h5 class="data-params"> {{(tripDataNew?.cxAvgVehicleSpeed) |
                                                number:'1.2-2'}} mph</h5>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-xs-12 col-lg-4">
                                          <div class="row">
                                            <div class="col-xs-12 col-lg-2">
                                              <img src="../../../../../../../../assets/images/odometer-icons.svg"
                                                class="image-icon">
                                            </div>
                                            <div class="col-xs-12 col-lg-8">
                                              <h5 class="heading-params">Odometer</h5>
                                              <h5 class="data-params">{{tripDataNew?.endOdometer | number:'1.2-2'}}
                                                miles</h5>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-xs-12 col-lg-4">
                                          <div class="row">
                                            <div class="col-xs-12 col-lg-2">
                                              <img src="../../../../../../../../assets/images/mileage-icons.svg"
                                                class="image-icon">
                                            </div>
                                            <div class="col-xs-12 col-lg-8">
                                              <h5 class="heading-params">Mileage</h5>
                                              <h5 class="data-params">
                                                <ng-container *ngIf="tripDataNew?.mileage <= -1">
                                                  0.00 mpg
                                                </ng-container>
                                                <ng-container *ngIf="tripDataNew?.mileage == null">
                                                  NA
                                                </ng-container>
                                                <ng-container *ngIf="tripDataNew?.mileage > -1">
                                                  {{tripDataNew?.mileage | number:'1.2-2'}} mpg</ng-container>
                                              </h5>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                        <div class="col-xs-12 col-lg-4">
                                          <div class="row">
                                            <div class="col-xs-12 col-lg-2">
                                              <img src="../../../../../../../../assets/images/fuelconsumed-icons.svg"
                                                class="image-icon">
                                            </div>
                                            <div class="col-xs-12 col-lg-8">
                                              <h5 class="heading-params">Fuel Consumed</h5>
                                              <h5 class="data-params">
                                                <ng-container *ngIf="fuelConsumed <= -1">
                                                  0.00 gal
                                                </ng-container>
                                                <ng-container *ngIf="fuelConsumed == null ">
                                                  NA
                                                </ng-container>
                                                <ng-container *ngIf="fuelConsumed > -1">
                                                  {{fuelConsumed | number:'1.2-2'}}
                                                  <ng-container *ngIf="tripDataNew?.fuelIndicator === 'percentage'">%</ng-container>
                                                  <ng-container *ngIf="tripDataNew?.fuelIndicator === 'absolute'">gal</ng-container></ng-container>
                                              </h5>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-xs-12 col-lg-4">
                                          <div class="row">
                                            <div class="col-xs-12 col-lg-2">
                                              <img src="../../../../../../../../assets/images/fuel-icons.svg"
                                                class="image-icon">
                                            </div>
                                            <div class="col-xs-12 col-lg-8">
                                              <h5 class="heading-params">Fuel Level</h5>
                                              <h5 class="data-params">
                                                <ng-container *ngIf="tripDataNew?.fuelLevel <= -1">
                                                  0.00 gal
                                                </ng-container>
                                                <ng-container *ngIf="tripDataNew?.fuelLevel === null || tripDataNew?.fuelLevel === 'NaN'">
                                                  --
                                                </ng-container>
                                                <ng-container *ngIf="tripDataNew?.fuelLevel > -1">
                                                  {{tripDataNew?.fuelLevel | number:'1.2-2'}}
                                                  <ng-container *ngIf="tripDataNew?.fuelIndicator === 'percentage'">%</ng-container>
                                                  <ng-container *ngIf="tripDataNew?.fuelIndicator === 'absolute'">gal</ng-container>
                                                  </ng-container>
                                              </h5>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-xs-12 col-lg-4">
                                          <div class="row">
                                            <div class="col-xs-12 col-lg-2">
                                              <img src="../../../../../../../../assets/images/battery-icons.svg"
                                                class="image-icon">
                                            </div>
                                            <div class="col-xs-12 col-lg-8">
                                              <h5 class="heading-params">Battery Level</h5>
                                              <h5 class="data-params">
                                                <ng-container *ngIf="tripDataNew?.cxEvLevel <= -1">
                                                  13.5 V
                                                </ng-container>
                                                <ng-container *ngIf="tripDataNew?.cxEvLevel == null">
                                                  NA
                                                </ng-container>
                                                <ng-container *ngIf="tripDataNew?.cxEvLevel > -1">
                                                  {{tripDataNew?.cxEvLevel | number: '1.2-2'}} V</ng-container>
                                              </h5>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                        <div class="col-xs-12 col-lg-4">
                                          <div class="row">
                                            <div class="col-xs-12 col-lg-2">
                                              <img src="../../../../../../../../assets/images/tripdistance-icons.svg"
                                                class="image-icon">
                                            </div>
                                            <div class="col-xs-12 col-lg-8">
                                              <h5 class="heading-params">Trip Distance</h5>
                                              <h5 class="data-params"> {{distance | number:'1.2-2'}} miles</h5>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-xs-12 col-lg-4">
                                          <div class="row">
                                            <div class="col-xs-12 col-lg-2">
                                              <img src="../../../../../../../../assets/images/tripduration-icons.svg"
                                                class="image-icon">
                                            </div>
                                            <div class="col-xs-12 col-lg-8">
                                              <h5 class="heading-params">Trip Duration</h5>
                                              <h5 class="data-params">  {{ formatDuration(tripDataNew?.cxDuration) }}</h5>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-xs-12 col-lg-4">
                                          <div class="row">
                                            <div class="col-xs-12 col-lg-2">
                                              <img src="../../../../../../../../assets/images/tripduration-icons.svg"
                                                class="image-icon">
                                            </div>
                                            <div class="col-xs-12 col-lg-8">
                                              <h5 class="heading-params">Idling Duration</h5>
                                              <h5 class="data-params">{{formatDuration(tripDataNew?.cxIdlingDuration)}}</h5>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                        <div class="col-xs-12 col-lg-4">
                                          <div class="row">
                                            <div class="col-xs-12 col-lg-2">
                                              <img src="../../../../../../../../assets/images/top-speed.svg"
                                                class="image-icon">
                                            </div>
                                            <div class="col-xs-12 col-lg-8">
                                              <h5 class="heading-params">Top Speed</h5>

                                              <h5 class="data-params">
                                                <ng-container
                                                  *ngIf="tripDataNew?.maxSpeed <= -1 || tripDataNew?.maxSpeed == null">
                                                  -- mph
                                                </ng-container>
                                                <ng-container *ngIf="tripDataNew?.maxSpeed > -1">
                                                  {{ tripDataNew?.maxSpeed | number: '1.2-2' }} mph
                                                </ng-container>
                                              </h5>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-xs-12 col-lg-4">
                                          <div class="row">
                                            <div class="col-xs-12 col-lg-2">
                                              <img src="../../../../../../../../assets/images/driver-score-icons.svg"
                                                class="image-icon">
                                            </div>
                                            <div class="col-xs-12 col-lg-8">
                                              <h5 class="heading-params">Driver Score</h5>
                                              <h5 class="data-params">
                                                <ng-container *ngIf="tripDataNew?.cxDriverBehaviourScore <= -1">
                                                  0
                                                </ng-container>
                                                <ng-container *ngIf="tripDataNew?.cxDriverBehaviourScore == null">
                                                  NA
                                                </ng-container>
                                                <ng-container *ngIf="tripDataNew?.cxDriverBehaviourScore > -1">
                                                  {{tripDataNew?.cxDriverBehaviourScore}} </ng-container>
                                              </h5>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="col-xs-12 col-lg-4">
                                          <div class="row">
                                            <div class="col-xs-12 col-lg-2">
                                              <img src="../../../../../../../../assets/images/vehicle-status.svg"
                                                class="image-icon">
                                            </div>
                                            <div class="col-xs-12 col-lg-8">
                                              <h5 class="heading-params">Vehicle Status</h5>
                                              <h5 class="data-params">Good</h5>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                    </ng-container>
                                      <ng-container
                                        *ngIf="tripDataNew?.vehicleType === 'HEV' || tripDataNew?.vehicleType === 'PHEV'">
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/speed-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Average Speed</h5>
                                                <h5 class="data-params"> {{(tripDataNew?.cxAvgVehicleSpeed) |
                                                  number:'1.2-2'}} mph</h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/odometer-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Odometer</h5>
                                                <h5 class="data-params">{{tripDataNew?.endOdometer | number:'1.2-2'}}
                                                  miles</h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/mileage-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Mileage</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.mileage <= -1">
                                                    0.00 mpg
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.mileage == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.mileage > -1">
                                                    {{tripDataNew?.mileage | number:'1.2-2'}} mpg</ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/fuelconsumed-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Fuel Consumed</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="fuelConsumed <= -1">
                                                    0.00 gal
                                                  </ng-container>
                                                  <ng-container *ngIf="fuelConsumed == null ">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="fuelConsumed > -1">
                                                    {{fuelConsumed | number:'1.2-2'}} gal</ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/fuel-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Fuel Level</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.fuelLevel <= -1">
                                                    0.00 gal
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.fuelLevel == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.fuelLevel > -1">
                                                    {{tripDataNew?.fuelLevel | number:'1.2-2'}}
                                                    <ng-container *ngIf="tripDataNew?.fuelIndicator === 'percentage'">%</ng-container>
                                                    <ng-container *ngIf="tripDataNew?.fuelIndicator === 'absolute'">gal</ng-container>
                                                    </ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/battery-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-10">
                                                <h5 class="heading-params">EV Battery Consumed</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.batteryConsumed <= -1">
                                                    0.00 %
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.batteryConsumed == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.batteryConsumed > -1">
                                                    {{tripDataNew?.batteryConsumed | number:'1.2-2'}} %</ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/battery-icons.svg"
                                                  class="image-icon" style="margin-left: 4px;">
                                              </div>
                                              <div class="col-xs-12 col-lg-10">
                                                <h5 class="heading-params">EV Battery Level</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.cxEvLevel <= -1">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.cxEvLevel == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.cxEvLevel > -1">
                                                    {{tripDataNew?.cxEvLevel | number:'1.2-2'}} %</ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/ev-remain.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-10">
                                                <h5 class="heading-params">EV Battery Remaining</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.remainingBattery <= -1">
                                                    0.00 %
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.remainingBattery == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.remainingBattery > -1">
                                                    {{tripDataNew?.remainingBattery | number:'1.2-2'}} %</ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/ev-range.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">EV Range</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.evRangeMilesPerKWh <= -1">
                                                    0.00 miles
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.evRangeMilesPerKWh == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.evRangeMilesPerKWh > -1">
                                                    {{tripDataNew?.evRangeMilesPerKWh | number:'1.2-2'}}
                                                    miles</ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/tripdistance-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Trip Distance</h5>
                                                <h5 class="data-params"> {{distance | number:'1.2-2'}} miles</h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/tripduration-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Trip Duration</h5>
                                                <h5 class="data-params"> {{ formatDuration(tripDataNew?.cxDuration) }}</h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/tripduration-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Idling Duration</h5>
                                                <h5 class="data-params"> {{formatDuration(tripDataNew?.cxIdlingDuration)}}</h5>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/top-speed.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Top Speed</h5>
                                                <h5 class="data-params">{{tripDataNew?.maxSpeed | number: '1.2-2'}} mph
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/driver-score-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Driver Score</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.cxDriverBehaviourScore <= -1">
                                                    0
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.cxDriverBehaviourScore == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.cxDriverBehaviourScore > -1">
                                                    {{tripDataNew?.cxDriverBehaviourScore}} </ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/vehicle-status.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Vehicle Status</h5>
                                                <h5 class="data-params">Good</h5>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </ng-container>
                                      <ng-container *ngIf="tripDataNew?.vehicleType === 'BEV'">
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/speed-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Average Speed</h5>
                                                <h5 class="data-params"> {{(tripDataNew?.cxAvgVehicleSpeed) |
                                                  number:'1.2-2'}} mph</h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/odometer-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Odometer</h5>
                                                <h5 class="data-params">{{tripDataNew?.endOdometer | number:'1.2-2'}}
                                                  miles</h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/mileage-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Mileage</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.mileage <= -1">
                                                    0.00 mpg
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.mileage == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.mileage > -1">
                                                    {{tripDataNew?.mileage | number:'1.2-2'}} mpg</ng-container>
                                                </h5>
                                                <!--change mile to mpg-->
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/battery-icons.svg"
                                                  class="image-icon" style="margin-left: 3px;">
                                              </div>
                                              <div class="col-xs-12 col-lg-10">
                                                <h5 class="heading-params">EV Battery Consumed</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.batteryConsumed <= -1">
                                                    0.00 %
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.batteryConsumed == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.batteryConsumed > -1">
                                                    {{tripDataNew?.batteryConsumed | number:'1.2-2'}} %</ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/ev-range.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">EV Range</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.evRangeMilesPerKWh <= -1">
                                                    0.00 miles
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.evRangeMilesPerKWh == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.evRangeMilesPerKWh > -1">
                                                    {{tripDataNew?.evRangeMilesPerKWh | number:'1.2-2'}}
                                                    miles</ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/ev-remain.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-10">
                                                <h5 class="heading-params">EV Battery Remaining</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.remainingBattery <= -1">
                                                    0.00 %
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.remainingBattery == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.remainingBattery > -1">
                                                    {{tripDataNew?.remainingBattery | number:'1.2-2'}} %</ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/tripdistance-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Trip Distance</h5>
                                                <h5 class="data-params"> {{distance | number:'1.2-2'}} miles</h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/tripduration-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Trip Duration</h5>
                                                <h5 class="data-params"> {{ formatDuration(tripDataNew?.cxDuration) }}</h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/tripduration-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Idling Duration</h5>
                                                <h5 class="data-params">{{formatDuration(tripDataNew?.cxIdlingDuration)}}</h5>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                        <div class="row" style="margin-top: 12px; margin-bottom: 12px;">
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/top-speed.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Top Speed</h5>
                                                <h5 class="data-params">{{tripDataNew?.maxSpeed | number: '1.2-2'}} mph
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/driver-score-icons.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Driver Score</h5>
                                                <h5 class="data-params">
                                                  <ng-container *ngIf="tripDataNew?.cxDriverBehaviourScore <= -1">
                                                    0
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.cxDriverBehaviourScore == null">
                                                    NA
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.cxDriverBehaviourScore > -1">
                                                    {{tripDataNew?.cxDriverBehaviourScore}} </ng-container>
                                                </h5>
                                              </div>
                                            </div>
                                          </div>
                                          <div class="col-xs-12 col-lg-4">
                                            <div class="row">
                                              <div class="col-xs-12 col-lg-2">
                                                <img src="../../../../../../../../assets/images/vehicle-status.svg"
                                                  class="image-icon">
                                              </div>
                                              <div class="col-xs-12 col-lg-8">
                                                <h5 class="heading-params">Vehicle Status</h5>
                                                <h5 class="data-params">Good</h5>
                                              </div>
                                            </div>
                                          </div>
                                        </div>
                                      </ng-container>
                                    </div>
                                    <!-- Trip details like fuel consumed, address, odomerter and more end-->
                                    <!-- Trip on Map-->
                                    <div class="col-md-6">
                                      <div class="map-container">
                                        <div class="map-card">
                                          <div class="flex-display">
                                            <div class="row">
                                            <div class="col-md" style="width: 17%!important; margin-right: 0px;  border-right: 1px dotted rgb(183, 180, 180);">
                                              <div class="flex-display" style="padding-right: 0.5rem;">
                                                <div class="">
                                                  <img src="../../../../../../../../assets/images/HA-TH.svg" alt=""
                                                    height="17px" />
                                                </div>
                                                <div class="">
                                                  <div class="map-card-text">Harsh<br>Acceleration</div>
                                                  <div class="map-main-text">{{tripDataNew?.cxHarshAccelerationCount}}
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                            <div class="col-md"  style="width: 17%!important; margin-right: 0px;   border-right: 1px dotted rgb(183, 180, 180);">
                                              <div class="flex-display" style="padding-right: 0.5rem;">
                                                <div class="">
                                                  <img src="../../../../../../../../assets/images/HB-TH.svg" alt=""
                                                    height="17px" />
                                                </div>
                                                <div class="">
                                                  <div class="map-card-text">Harsh<br>Braking</div>
                                                  <div class="map-main-text">{{tripDataNew?.cxHarshBrakingCount}}</div>
                                                </div>
                                              </div>
                                            </div>
                                            <div class="col-md" style="width: 17%!important; margin-right: 0px;   border-right: 1px dotted rgb(183, 180, 180);">
                                              <div class="flex-display" style="padding-right: 0.5rem;">
                                                <div class="">
                                                  <img src="../../../../../../../../assets/images/HC-TH.svg" alt=""
                                                    height="17px" />
                                                </div>
                                                <div class="">
                                                  <div class="map-card-text">Harsh Cornering</div>
                                                  <div class="map-main-text">{{tripDataNew?.cxHarshCorneringCount}}
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                            <div class="col-md"  style="width: 24.5%!important;;   border-right: 1px dotted rgb(183, 180, 180);">
                                              <div class="flex-display" style="padding-right: 0.5rem; width: 134px;">
                                                <div class="">
                                                  <img src="../../../../../../../../assets/images/OS-TH.svg" alt=""
                                                    height="17px" />
                                                </div>
                                                <div style="width: 107px;">
                                                  <div class="map-card-text">Over<br> Speeding (miles)</div>
                                                  <div class="map-main-text">
                                                    <ng-container *ngIf="tripDataNew?.cxOverspeedingDistance === -1">
                                                      --
                                                     </ng-container>
                                                    <ng-container *ngIf="tripDataNew?.cxOverspeedingDistance != -1">
                                                      {{tripDataNew?.cxOverspeedingDistance | number:'1.2-2'}}
                                                     </ng-container>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                            <div class="col-md"  style="width: 24.5%!important;">
                                              <div class="flex-display" style="padding-right: 0.5rem; width: 134px;">
                                                <div class="">
                                                  <img src="../../../../../../../../assets/images/ND-TH.svg" alt=""
                                                    height="17px" />
                                                </div>
                                                <div style="width: 107px;">
                                                  <div class="map-card-text">Night <br>Driving (miles)</div>
                                                  <div class="map-main-text">
                                                  <ng-container *ngIf="tripDataNew?.cxNightDistance === -1">
                                                   --
                                                  </ng-container>
                                                  <ng-container *ngIf="tripDataNew?.cxNightDistance != -1">
                                                    {{tripDataNew?.cxNightDistance | number:'1.2-2'}}
                                                  </ng-container>
                                                  </div>
                                                </div>
                                              </div>
                                            </div>
                                          </div>
                                          </div>
                                        </div>
                                        <div class="map-container">
                                          <div class="map-loading-overlay" *ngIf="mapLoading">
                                            <div class="spinner"></div>
                                            <div>Loading map data...</div>
                                          </div>
                                         <agm-map [latitude]="lat" [longitude]="lng" [styles]="mapStyles"
                                            [style.height]="
                                              tripDataNew?.vehicleType === 'BEV' ? '330px' :
                                              tripDataNew?.vehicleType === 'PHEV, HEV' ? '460px' :
                                              (tripDataNew?.vehicleType === 'Gasoline, Diesel, Flexible Fuel Vehicle (FFV)' ? '330px' : '330px')"
                                            [mapTypeId]="currentMapType" class="map-heights" [zoom]="zoom"
                                            [fullscreenControl]="true">
<agm-marker
    *ngFor="let coordinate of start_end_mark"
    [latitude]="coordinate[0]"
    [longitude]="coordinate[1]"
    [iconUrl]="{
      url: coordinate[2].iconUrl,
      scaledSize: { height: 20, width: 20 }
    }">
  </agm-marker>

  <!-- Alert Markers -->
  <agm-marker
    *ngFor="let alert of alertMarkers"
    [latitude]="alert.lat"
    [longitude]="alert.lng"
    [iconUrl]="{
      url: alert.iconUrl,
      scaledSize: { height: 25, width: 25 }
    }"
    [title]="alert.title">
  </agm-marker>

  <!-- Waypoints Polyline (Default Route) -->
  <agm-polyline [visible]="true" [strokeWeight]="2" [strokeColor]="getPolylineColor()" title="polylineTitle">
    <agm-polyline-point
      *ngFor="let coordinate of wayPoints"
      [latitude]="coordinate.coords[0]"
      [longitude]="coordinate.coords[1]"
      [strokeColor]="coordinate.color" >
    </agm-polyline-point>
  </agm-polyline>


  <!-- Alert Segments Polyline -->
  <agm-polyline
    *ngFor="let segment of alertSegments"
    [visible]="true"
    [strokeWeight]="2"
    [strokeColor]="segment.color">
    <agm-polyline-point [latitude]="segment.start[0]" [longitude]="segment.start[1]"></agm-polyline-point>
    <agm-polyline-point [latitude]="segment.end[0]" [longitude]="segment.end[1]"></agm-polyline-point>
  </agm-polyline>
                                          </agm-map>

                                          <div class="map-controls">
                                            <button (click)="toggleMapType()" class="map-toggle-button"
                                              [ngClass]="{'roadmap-bg': currentMapType === 'roadmap', 'satellite-bg': currentMapType === 'satellite'}">
                                              <span>{{ currentMapType === 'roadmap' ? 'Roadmap' : 'Satellite' }} </span>
                                            </button>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <!-- Trip on Map end-->
                                  </div>
                                </td>
                              </tr>
                              <!-- Trip Details after expand row-->
                            </ng-container>
                          </tbody>
                        </table>
                        <!--Trip details table end-->
                      </td>
                    </tr>
                    <!--Expand row data end -->
                  </ng-container>
                  <!-- Start Date, Total Trips and Total Miles expand end-->
                </tbody>
              </table>
            </div>
            <!-- Data in table end-->
          </div>
          <!--Trip Summary Section Start-->
        </div>
      </div>
    </div>
  </div>
  <!--Main Content End-->
</div>
<!--Main content end-->
<!-- Model For No Data Found After Download Button Click Start-->
<ng-template #nodatafound let-modal>
  <div class="modal-body">
    <h5 class="nodatafound">No data available in selected date, Please select different date. </h5>
  </div>
</ng-template>
<!-- Model For No Data Found After Download Button Click Start-->
